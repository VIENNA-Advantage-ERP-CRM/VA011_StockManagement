/*Version 1.0.9.4*/
(function(n){var t={settings:{barWidth:1,barHeight:50,moduleSize:5,showHRI:!0,addQuietZone:!0,marginHRI:5,bgColor:"#FFFFFF",color:"#000000",fontSize:10,output:"css",posX:0,posY:0},intval:function(n){var t=typeof n;return t=="string"?(n=n.replace(/[^0-9-.]/g,""),n=parseInt(n*1,10),isNaN(n)||!isFinite(n)?0:n):t=="number"&&isFinite(n)?Math.floor(n):0},i25:{encoding:["NNWWN","WNNNW","NWNNW","WWNNN","NNWNW","WNWNN","NWWNN","NNNWW","WNNWN","NWNWN"],compute:function(n,i,r){var u,f,o,e;if(i){for(r=="int25"&&n.length%2==0&&(n="0"+n),u=!0,o=0,e=n.length-1;e>-1;e--){if(f=t.intval(n.charAt(e)),isNaN(f))return"";o+=u?3*f:f;u=!u}n+=((10-o%10)%10).toString()}else n.length%2!=0&&(n="0"+n);return n},getDigit:function(n,t,i){var r,u,f,e,o;if(n=this.compute(n,t,i),n=="")return"";if(result="",i=="int25"){for(result+="1010",r=0;r<n.length/2;r++)for(f=n.charAt(2*r),e=n.charAt(2*r+1),u=0;u<5;u++)result+="1",this.encoding[f].charAt(u)=="W"&&(result+="1"),result+="0",this.encoding[e].charAt(u)=="W"&&(result+="0");result+="1101"}else if(i=="std25"){for(result+="11011010",r=0;r<n.length;r++)for(o=n.charAt(r),u=0;u<5;u++)result+="1",this.encoding[o].charAt(u)=="W"&&(result+="11"),result+="0";result+="11010110"}return result}},ean:{encoding:[["0001101","0100111","1110010"],["0011001","0110011","1100110"],["0010011","0011011","1101100"],["0111101","0100001","1000010"],["0100011","0011101","1011100"],["0110001","0111001","1001110"],["0101111","0000101","1010000"],["0111011","0010001","1000100"],["0110111","0001001","1001000"],["0001011","0010111","1110100"]],first:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],getDigit:function(n,i){var e=i=="ean8"?7:12,f,u,o,r;if(n=n.substring(0,e),n.length!=e)return"";for(r=0;r<n.length;r++)if(f=n.charAt(r),f<"0"||f>"9")return"";if(n=this.compute(n,i),u="101",i=="ean8"){for(r=0;r<4;r++)u+=this.encoding[t.intval(n.charAt(r))][0];for(u+="01010",r=4;r<8;r++)u+=this.encoding[t.intval(n.charAt(r))][2]}else{for(o=this.first[t.intval(n.charAt(0))],r=1;r<7;r++)u+=this.encoding[t.intval(n.charAt(r))][t.intval(o.charAt(r-1))];for(u+="01010",r=7;r<13;r++)u+=this.encoding[t.intval(n.charAt(r))][2]}return u+"101"},compute:function(n,r){var e=r=="ean13"?12:7,f,u;for(n=n.substring(0,e),f=0,u=!0,i=n.length-1;i>-1;i--)f+=(u?3:1)*t.intval(n.charAt(i)),u=!u;return n+((10-f%10)%10).toString()}},upc:{getDigit:function(n){return n.length<12&&(n="0"+n),t.ean.getDigit(n,"ean13")},compute:function(n){return n.length<12&&(n="0"+n),t.ean.compute(n,"ean13").substr(1)}},msi:{encoding:["100100100100","100100100110","100100110100","100100110110","100110100100","100110100110","100110110100","100110110110","110100100100","110100100110"],compute:function(n,t){return typeof t=="object"?(t.crc1=="mod10"?n=this.computeMod10(n):t.crc1=="mod11"&&(n=this.computeMod11(n)),t.crc2=="mod10"?n=this.computeMod10(n):t.crc2=="mod11"&&(n=this.computeMod11(n))):typeof t=="boolean"&&t&&(n=this.computeMod10(n)),n},computeMod10:function(n){for(var r=n.length%2,u=0,f=0,e,i=0;i<n.length;i++)r?u=10*u+t.intval(n.charAt(i)):f+=t.intval(n.charAt(i)),r=!r;for(e=(2*u).toString(),i=0;i<e.length;i++)f+=t.intval(e.charAt(i));return n+((10-f%10)%10).toString()},computeMod11:function(n){for(var u=0,i=2,r=n.length-1;r>=0;r--)u+=i*t.intval(n.charAt(r)),i=i==7?2:i+1;return n+((11-u%11)%11).toString()},getDigit:function(n){var t=0,r="";for(n=this.compute(n,!1),r="110",i=0;i<n.length;i++){if(t="0123456789".indexOf(n.charAt(i)),t<0)return"";r+=this.encoding[t]}return r+"1001"}},code11:{encoding:["101011","1101011","1001011","1100101","1011011","1101101","1001101","1010011","1101001","110101","101101"],getDigit:function(n){for(var h="0123456789-",i,r="",u="0",s,l,r="1011001"+u,t=0;t<n.length;t++){if(i=h.indexOf(n.charAt(t)),i<0)return"";r+=this.encoding[i]+u}var f=0,c=0,e=1,o=0;for(t=n.length-1;t>=0;t--)f=f==10?1:f+1,e=e==10?1:e+1,i=h.indexOf(n.charAt(t)),c+=f*i,o+=e*i;return s=c%11,o+=s,l=o%11,r+=this.encoding[s]+u,n.length>=10&&(r+=this.encoding[l]+u),r+"1011001"}},code39:{encoding:["101001101101","110100101011","101100101011","110110010101","101001101011","110100110101","101100110101","101001011011","110100101101","101100101101","110101001011","101101001011","110110100101","101011001011","110101100101","101101100101","101010011011","110101001101","101101001101","101011001101","110101010011","101101010011","110110101001","101011010011","110101101001","101101101001","101010110011","110101011001","101101011001","101011011001","110010101011","100110101011","110011010101","100101101011","110010110101","100110110101","100101011011","110010101101","100110101101","100100100101","100100101001","100101001001","101001001001","100101101101"],getDigit:function(n){var t,i,r="";if(n.indexOf("*")>=0)return"";for(n=("*"+n+"*").toUpperCase(),t=0;t<n.length;t++){if(i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%*".indexOf(n.charAt(t)),i<0)return"";t>0&&(r+="0");r+=this.encoding[i]}return r}},code93:{encoding:["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],getDigit:function(n,t){var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%____*",u="",r,c;if(n.indexOf("*")>=0)return"";for(n=n.toUpperCase(),u+=this.encoding[47],i=0;i<n.length;i++){if(r=n.charAt(i),index=s.indexOf(r),r=="_"||index<0)return"";u+=this.encoding[index]}if(t){var f=0,h=0,e=1,o=0;for(i=n.length-1;i>=0;i--)f=f==20?1:f+1,e=e==15?1:e+1,index=s.indexOf(n.charAt(i)),h+=f*index,o+=e*index;r=h%47;o+=r;c=o%47;u+=this.encoding[r];u+=this.encoding[c]}return u+=this.encoding[47],u+"1"}},code128:{encoding:["11011001100","11001101100","11001100110","10010011000","10010001100","10001001100","10011001000","10011000100","10001100100","11001001000","11001000100","11000100100","10110011100","10011011100","10011001110","10111001100","10011101100","10011100110","11001110010","11001011100","11001001110","11011100100","11001110100","11101101110","11101001100","11100101100","11100100110","11101100100","11100110100","11100110010","11011011000","11011000110","11000110110","10100011000","10001011000","10001000110","10110001000","10001101000","10001100010","11010001000","11000101000","11000100010","10110111000","10110001110","10001101110","10111011000","10111000110","10001110110","11101110110","11010001110","11000101110","11011101000","11011100010","11011101110","11101011000","11101000110","11100010110","11101101000","11101100010","11100011010","11101111010","11001000010","11110001010","10100110000","10100001100","10010110000","10010000110","10000101100","10000100110","10110010000","10110000100","10011010000","10011000010","10000110100","10000110010","11000010010","11001010000","11110111010","11000010100","10001111010","10100111100","10010111100","10010011110","10111100100","10011110100","10011110010","11110100100","11110010100","11110010010","11011011110","11011110110","11110110110","10101111000","10100011110","10001011110","10111101000","10111100010","11110101000","11110100010","10111011110","10111101110","11101011110","11110101110","11010000100","11010010000","11010011100","11000111010"],getDigit:function(n){for(var c=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",f="",e=0,h=0,i=0,r=0,o=0,u,s,i=0;i<n.length;i++)if(c.indexOf(n.charAt(i))==-1)return"";for(u=n.length>1,s="",i=0;i<3&&i<n.length;i++)s=n.charAt(i),u&=s>="0"&&s<="9";for(e=u?105:104,f=this.encoding[e],i=0;i<n.length;){if(u)(i==n.length||n.charAt(i)<"0"||n.charAt(i)>"9"||n.charAt(i+1)<"0"||n.charAt(i+1)>"9")&&(u=!1,f+=this.encoding[100],e+=++h*100);else{for(r=0;i+r<n.length&&n.charAt(i+r)>="0"&&n.charAt(i+r)<="9";)r++;u=r>5||i+r-1==n.length&&r>3;u&&(f+=this.encoding[99],e+=++h*99)}u?(o=t.intval(n.charAt(i)+n.charAt(i+1)),i+=2):(o=c.indexOf(n.charAt(i)),i+=1);f+=this.encoding[o];e+=++h*o}return f+=this.encoding[e%103],f+=this.encoding[106],f+"11"}},codabar:{encoding:["101010011","101011001","101001011","110010101","101101001","110101001","100101011","100101101","100110101","110100101","101001101","101100101","1101011011","1101101011","1101101101","1011011011","1011001001","1010010011","1001001011","1010011001"],getDigit:function(n){var t,i,r="",u="0";for(r+=this.encoding[16]+u,t=0;t<n.length;t++){if(i="0123456789-$:/.+".indexOf(n.charAt(t)),i<0)return"";r+=this.encoding[i]+u}return r+this.encoding[16]}},datamatrix:{lengthRows:[10,12,14,16,18,20,22,24,26,32,36,40,44,48,52,64,72,80,88,96,104,120,132,144,8,8,12,12,16,16],lengthCols:[10,12,14,16,18,20,22,24,26,32,36,40,44,48,52,64,72,80,88,96,104,120,132,144,18,32,26,36,36,48],dataCWCount:[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558,5,10,16,22,32,49],solomonCWCount:[5,7,10,12,14,18,20,24,28,36,42,48,56,68,84,112,144,192,224,272,336,408,496,620,7,11,14,18,24,28],dataRegionRows:[8,10,12,14,16,18,20,22,24,14,16,18,20,22,24,14,16,18,20,22,24,18,20,22,6,6,10,10,14,14],dataRegionCols:[8,10,12,14,16,18,20,22,24,14,16,18,20,22,24,14,16,18,20,22,24,18,20,22,16,14,24,16,16,22],regionRows:[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,4,4,4,4,4,4,6,6,6,1,1,1,1,1,1],regionCols:[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,4,4,4,4,4,4,6,6,6,1,2,1,2,2,2],interleavedBlocks:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,4,4,4,4,6,6,8,8,1,1,1,1,1,1],logTab:[-255,255,1,240,2,225,241,53,3,38,226,133,242,43,54,210,4,195,39,114,227,106,134,28,243,140,44,23,55,118,211,234,5,219,196,96,40,222,115,103,228,78,107,125,135,8,29,162,244,186,141,180,45,99,24,49,56,13,119,153,212,199,235,91,6,76,220,217,197,11,97,184,41,36,223,253,116,138,104,193,229,86,79,171,108,165,126,145,136,34,9,74,30,32,163,84,245,173,187,204,142,81,181,190,46,88,100,159,25,231,50,207,57,147,14,67,120,128,154,248,213,167,200,63,236,110,92,176,7,161,77,124,221,102,218,95,198,90,12,152,98,48,185,179,42,209,37,132,224,52,254,239,117,233,139,22,105,27,194,113,230,206,87,158,80,189,172,203,109,175,166,62,127,247,146,66,137,192,35,252,10,183,75,216,31,83,33,73,164,144,85,170,246,65,174,61,188,202,205,157,143,169,82,72,182,215,191,251,47,178,89,151,101,94,160,123,26,112,232,21,51,238,208,131,58,69,148,18,15,16,68,17,121,149,129,19,155,59,249,70,214,250,168,71,201,156,64,60,237,130,111,20,93,122,177,150],aLogTab:[1,2,4,8,16,32,64,128,45,90,180,69,138,57,114,228,229,231,227,235,251,219,155,27,54,108,216,157,23,46,92,184,93,186,89,178,73,146,9,18,36,72,144,13,26,52,104,208,141,55,110,220,149,7,14,28,56,112,224,237,247,195,171,123,246,193,175,115,230,225,239,243,203,187,91,182,65,130,41,82,164,101,202,185,95,190,81,162,105,210,137,63,126,252,213,135,35,70,140,53,106,212,133,39,78,156,21,42,84,168,125,250,217,159,19,38,76,152,29,58,116,232,253,215,131,43,86,172,117,234,249,223,147,11,22,44,88,176,77,154,25,50,100,200,189,87,174,113,226,233,255,211,139,59,118,236,245,199,163,107,214,129,47,94,188,85,170,121,242,201,191,83,166,97,194,169,127,254,209,143,51,102,204,181,71,142,49,98,196,165,103,206,177,79,158,17,34,68,136,61,122,244,197,167,99,198,161,111,222,145,15,30,60,120,240,205,183,67,134,33,66,132,37,74,148,5,10,20,40,80,160,109,218,153,31,62,124,248,221,151,3,6,12,24,48,96,192,173,119,238,241,207,179,75,150,1],champGaloisMult:function(n,t){return!n||!t?0:this.aLogTab[(this.logTab[n]+this.logTab[t])%255]},champGaloisDoub:function(n,t){return n?t?this.aLogTab[(this.logTab[n]+t)%255]:n:0},champGaloisSum:function(n,t){return n^t},selectIndex:function(n,t){if((n<1||n>1558)&&!t||(n<1||n>49)&&t)return-1;var i=0;for(t&&(i=24);this.dataCWCount[i]<n;)i++;return i},encodeDataCodeWordsASCII:function(n){for(var u=[],r=0,t,i=0;i<n.length;i++)t=n.charCodeAt(i),t>127?(u[r]=235,t=t-127,r++):t>=48&&t<=57&&i+1<n.length&&n.charCodeAt(i+1)>=48&&n.charCodeAt(i+1)<=57?(t=(t-48)*10+(n.charCodeAt(i+1)-48),t+=130,i++):t++,u[r]=t,r++;return u},addPadCW:function(n,t,i){if(!(t>=i)){n[t]=129;for(var u,r=t+1;r<i;r++)u=149*(r+1)%253+1,n[r]=(129+u)%254}},calculSolFactorTable:function(n){for(var r=[],i,t=0;t<=n;t++)r[t]=1;for(t=1;t<=n;t++)for(i=t-1;i>=0;i--)r[i]=this.champGaloisDoub(r[i],t),i>0&&(r[i]=this.champGaloisSum(r[i],r[i-1]));return r},addReedSolomonCW:function(n,t,i,r,u){for(var c=0,h=n/u,o=[],f,e,s=0;s<u;s++){for(f=0;f<h;f++)o[f]=0;for(f=s;f<i;f=f+u)for(c=this.champGaloisSum(r[f],o[h-1]),e=h-1;e>=0;e--)o[e]=c?this.champGaloisMult(c,t[e]):0,e>0&&(o[e]=this.champGaloisSum(o[e-1],o[e]));for(e=i+s,f=h-1;f>=0;f--)r[e]=o[f],e=e+u}return r},getBits:function(n){for(var i=[],t=0;t<8;t++)i[t]=n&128>>t?1:0;return i},next:function(n,t,i,r,u,f){var s=0,e=4,o=0;do{e==t&&o==0?(this.patternShapeSpecial1(u,f,r[s],t,i),s++):n<3&&e==t-2&&o==0&&i%4!=0?(this.patternShapeSpecial2(u,f,r[s],t,i),s++):e==t-2&&o==0&&i%8==4?(this.patternShapeSpecial3(u,f,r[s],t,i),s++):e==t+4&&o==2&&i%8==0&&(this.patternShapeSpecial4(u,f,r[s],t,i),s++);do e<t&&o>=0&&f[e][o]!=1&&(this.patternShapeStandard(u,f,r[s],e,o,t,i),s++),e-=2,o+=2;while(e>=0&&o<i);e+=1;o+=3;do e>=0&&o<i&&f[e][o]!=1&&(this.patternShapeStandard(u,f,r[s],e,o,t,i),s++),e+=2,o-=2;while(e<t&&o>=0);e+=3;o+=1}while(e<t||o<i)},patternShapeStandard:function(n,t,i,r,u,f,e){this.placeBitInDatamatrix(n,t,i[0],r-2,u-2,f,e);this.placeBitInDatamatrix(n,t,i[1],r-2,u-1,f,e);this.placeBitInDatamatrix(n,t,i[2],r-1,u-2,f,e);this.placeBitInDatamatrix(n,t,i[3],r-1,u-1,f,e);this.placeBitInDatamatrix(n,t,i[4],r-1,u,f,e);this.placeBitInDatamatrix(n,t,i[5],r,u-2,f,e);this.placeBitInDatamatrix(n,t,i[6],r,u-1,f,e);this.placeBitInDatamatrix(n,t,i[7],r,u,f,e)},patternShapeSpecial1:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-1,1,r,u);this.placeBitInDatamatrix(n,t,i[2],r-1,2,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[5],1,u-1,r,u);this.placeBitInDatamatrix(n,t,i[6],2,u-1,r,u);this.placeBitInDatamatrix(n,t,i[7],3,u-1,r,u)},patternShapeSpecial2:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-3,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-2,0,r,u);this.placeBitInDatamatrix(n,t,i[2],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-4,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-3,r,u);this.placeBitInDatamatrix(n,t,i[5],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[6],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[7],1,u-1,r,u)},patternShapeSpecial3:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-3,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-2,0,r,u);this.placeBitInDatamatrix(n,t,i[2],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[5],1,u-1,r,u);this.placeBitInDatamatrix(n,t,i[6],2,u-1,r,u);this.placeBitInDatamatrix(n,t,i[7],3,u-1,r,u)},patternShapeSpecial4:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-1,u-1,r,u);this.placeBitInDatamatrix(n,t,i[2],0,u-3,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[5],1,u-3,r,u);this.placeBitInDatamatrix(n,t,i[6],1,u-2,r,u);this.placeBitInDatamatrix(n,t,i[7],1,u-1,r,u)},placeBitInDatamatrix:function(n,t,i,r,u,f,e){r<0&&(r+=f,u+=4-(f+4)%8);u<0&&(u+=e,r+=4-(e+4)%8);t[r][u]!=1&&(n[r][u]=i,t[r][u]=1)},addFinderPattern:function(n,t,i,r,u){var h=(r+2)*t,s=(u+2)*i,o=[],e,f;for(o[0]=[],f=0;f<s+2;f++)o[0][f]=0;for(e=0;e<h;e++)for(o[e+1]=[],o[e+1][0]=0,o[e+1][s+1]=0,f=0;f<s;f++)e%(r+2)==0?o[e+1][f+1]=f%2==0?1:0:e%(r+2)==r+1?o[e+1][f+1]=1:f%(u+2)==u+1?o[e+1][f+1]=e%2==0?0:1:f%(u+2)==0?o[e+1][f+1]=1:(o[e+1][f+1]=0,o[e+1][f+1]=n[e-1-2*parseInt(e/(r+2))][f-1-2*parseInt(f/(u+2))]);for(o[h+1]=[],f=0;f<s+2;f++)o[h+1][f]=0;return o},getDigit:function(n,t){var s=this.encodeDataCodeWordsASCII(n),a=s.length,f=this.selectIndex(a,t),h=this.dataCWCount[f],c=this.solomonCWCount[f],b=h+c,k=this.lengthRows[f],d=this.lengthCols[f],v=this.regionRows[f],y=this.regionCols[f],g=this.dataRegionRows[f],nt=this.dataRegionCols[f],u=k-2*v,i=d-2*y,p=this.interleavedBlocks[f],tt=c/p,w,l,e,o,r;for(this.addPadCW(s,a,h),w=this.calculSolFactorTable(tt),this.addReedSolomonCW(c,w,h,s,p),l=[],r=0;r<b;r++)l[r]=this.getBits(s[r]);for(e=[],o=[],r=0;r<i;r++)e[r]=[],o[r]=[];return u*i%8==4&&(e[u-2][i-2]=1,e[u-1][i-1]=1,e[u-1][i-2]=0,e[u-2][i-1]=0,o[u-2][i-2]=1,o[u-1][i-1]=1,o[u-1][i-2]=1,o[u-2][i-1]=1),this.next(0,u,i,l,e,o),this.addFinderPattern(e,v,y,g,nt)}},lec:{cInt:function(n,t){for(var r="",i=0;i<t;i++)r+=String.fromCharCode(n&255),n=n>>8;return r},cRgb:function(n,t,i){return String.fromCharCode(i)+String.fromCharCode(t)+String.fromCharCode(n)},cHexColor:function(n){var t=parseInt("0x"+n.substr(1)),u=t&255,i,r;return t=t>>8,i=t&255,r=t>>8,this.cRgb(r,i,u)}},hexToRGB:function(n){var t=parseInt("0x"+n.substr(1)),u=t&255,i,r;return t=t>>8,i=t&255,r=t>>8,{r:r,g:i,b:u}},isHexColor:function(n){var t=new RegExp("#[0-91-F]","gi");return n.match(t)},base64Encode:function(n){for(var s="",e,t,i,h,c,o,r,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0;f<n.length;)e=n.charCodeAt(f++),t=n.charCodeAt(f++),i=n.charCodeAt(f++),h=e>>2,c=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),s+=u.charAt(h)+u.charAt(c)+u.charAt(o)+u.charAt(r);return s},bitStringTo2DArray:function(n){var i=[],t;for(i[0]=[],t=0;t<n.length;t++)i[0][t]=n.charAt(t);return i},resize:function(n,t){return n.css("padding","0px").css("overflow","auto").css("width",t+"px").html(""),n},digitToBmpRenderer:function(n,t,i,r,u,f){for(var a=i.length,o=i[0].length,e=0,g=this.isHexColor(t.bgColor)?this.lec.cHexColor(t.bgColor):this.lec.cRgb(255,255,255),nt=this.isHexColor(t.color)?this.lec.cHexColor(t.color):this.lec.cRgb(0,0,0),w="",b="",y,s,h,c,p,l,e=0;e<u;e++)w+=g,b+=nt;var v=(4-u*o*3%4)%4,k=(u*o+v)*f*a,d="";for(e=0;e<v;e++)d+='\0';for(y="BM"+this.lec.cInt(54+k,4)+'\0\0\0\0'+this.lec.cInt(54,4)+this.lec.cInt(40,4)+this.lec.cInt(u*o,4)+this.lec.cInt(f*a,4)+this.lec.cInt(1,2)+this.lec.cInt(24,2)+'\0\0\0\0'+this.lec.cInt(k,4)+this.lec.cInt(2835,4)+this.lec.cInt(2835,4)+this.lec.cInt(0,4)+this.lec.cInt(0,4),s=a-1;s>=0;s--){for(h="",c=0;c<o;c++)h+=i[s][c]=="0"?w:b;for(h+=d,p=0;p<f;p++)y+=h}l=document.createElement("object");l.setAttribute("type","image/bmp");l.setAttribute("data","data:image/bmp;base64,"+this.base64Encode(y));this.resize(n,u*o+v).append(l)},digitToBmp:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight);this.digitToBmpRenderer(n,i,this.bitStringTo2DArray(r),u,f,e)},digitToBmp2D:function(n,i,r,u){var f=t.intval(i.moduleSize);this.digitToBmpRenderer(n,i,r,u,f,f)},digitToCssRenderer:function(n,t,i,r,u,f){for(var y=i.length,l=i[0].length,c="",a='<div style="float: left; font-size: 0px; background-color: '+t.bgColor+"; height: "+f+'px; width: &Wpx"><\/div>',v='<div style="float: left; font-size: 0px; width:0; border-left: &Wpx solid '+t.color+"; height: "+f+'px;"><\/div>',e,s,h,o=0;o<y;o++){for(e=0,s=i[o][0],h=0;h<l;h++)s==i[o][h]?e++:(c+=(s=="0"?a:v).replace("&W",e*u),s=i[o][h],e=1);e>0&&(c+=(s=="0"?a:v).replace("&W",e*u))}t.showHRI&&(c+='<div style="clear:both; width: 100%; background-color: '+t.bgColor+"; color: "+t.color+"; text-align: center; font-size: "+t.fontSize+"px; margin-top: "+t.marginHRI+'px;">'+r+"<\/div>");this.resize(n,u*l).html(c)},digitToCss:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight);this.digitToCssRenderer(n,i,this.bitStringTo2DArray(r),u,f,e)},digitToCss2D:function(n,i,r,u){var f=t.intval(i.moduleSize);this.digitToCssRenderer(n,i,r,u,f,f)},digitToSvgRenderer:function(n,i,r,u,f,e){var k=r.length,w=r[0].length,a=f*w,v=e*k,y,o,b,s,l,h,c,p;for(i.showHRI&&(y=t.intval(i.fontSize),v+=t.intval(i.marginHRI)+y),o='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a+'" height="'+v+'">',o+='<rect width="'+a+'" height="'+v+'" x="0" y="0" fill="'+i.bgColor+'" />',b='<rect width="&W" height="'+e+'" x="&X" y="&Y" fill="'+i.color+'" />',h=0;h<k;h++){for(s=0,l=r[h][0],c=0;c<w;c++)l==r[h][c]?s++:(l=="1"&&(o+=b.replace("&W",s*f).replace("&X",(c-s)*f).replace("&Y",h*e)),l=r[h][c],s=1);s>0&&l=="1"&&(o+=b.replace("&W",s*f).replace("&X",(w-s)*f).replace("&Y",h*e))}i.showHRI&&(o+='<g transform="translate('+Math.floor(a/2)+' 0)">',o+='<text y="'+(v-Math.floor(y/2))+'" text-anchor="middle" style="font-family: Arial; font-size: '+y+'px;" fill="'+i.color+'">'+u+"<\/text>",o+="<\/g>");o+="<\/svg>";p=document.createElement("object");p.setAttribute("type","image/svg+xml");p.setAttribute("data","data:image/svg+xml,"+o);this.resize(n,a).append(p)},digitToSvg:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight);this.digitToSvgRenderer(n,i,this.bitStringTo2DArray(r),u,f,e)},digitToSvg2D:function(n,i,r,u){var f=t.intval(i.moduleSize);this.digitToSvgRenderer(n,i,r,u,f,f)},digitToCanvasRenderer:function(n,t,i,r,u,f,e,o){var y=n.get(0),h,c,a,l,w;if(y&&y.getContext){var p=i.length,v=i[0].length,s=y.getContext("2d");for(s.lineWidth=1,s.lineCap="butt",s.fillStyle=t.bgColor,s.fillRect(u,f,v*e,p*o),s.fillStyle=t.color,h=0;h<p;h++){for(c=0,a=i[h][0],l=0;l<v;l++)a==i[h][l]?c++:(a=="1"&&s.fillRect(u+(l-c)*e,f+h*o,e*c,o),a=i[h][l],c=1);c>0&&a=="1"&&s.fillRect(u+(v-c)*e,f+h*o,e*c,o)}t.showHRI&&(w=s.measureText(r),s.fillText(r,u+Math.floor((v*e-w.width)/2),f+p*o+t.fontSize+t.marginHRI))}},digitToCanvas:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight),o=t.intval(i.posX),s=t.intval(i.posY);this.digitToCanvasRenderer(n,i,this.bitStringTo2DArray(r),u,o,s,f,e)},digitToCanvas2D:function(n,i,r,u){var f=t.intval(i.moduleSize),e=t.intval(i.posX),o=t.intval(i.posY);this.digitToCanvasRenderer(n,i,r,u,e,o,f,f)}};n.fn.extend({barcode:function(i,r,u){var e="",o="",f="",s=!0,v=!1,c=!1,h,l,a;if(typeof i=="string"?f=i:typeof i=="object"&&(f=typeof i.code=="string"?i.code:"",s=typeof i.crc!="undefined"?i.crc:!0,v=typeof i.rect!="undefined"?i.rect:!1),f=="")return!1;typeof u=="undefined"&&(u=[]);for(h in t.settings)u[h]==undefined&&(u[h]=t.settings[h]);switch(r){case"std25":case"int25":e=t.i25.getDigit(f,s,r);o=t.i25.compute(f,s,r);break;case"ean8":case"ean13":e=t.ean.getDigit(f,r);o=t.ean.compute(f,r);break;case"upc":e=t.upc.getDigit(f);o=t.upc.compute(f);break;case"code11":e=t.code11.getDigit(f);o=f;break;case"code39":e=t.code39.getDigit(f);o=f;break;case"code93":e=t.code93.getDigit(f,s);o=f;break;case"code128":e=t.code128.getDigit(f);o=f;break;case"codabar":e=t.codabar.getDigit(f);o=f;break;case"msi":e=t.msi.getDigit(f,s);o=t.msi.compute(f,s);break;case"datamatrix":e=t.datamatrix.getDigit(f,v);o=f;c=!0}return e.length==0?n(this):(!c&&u.addQuietZone&&(e="0000000000"+e+"0000000000"),l=n(this),a="digitTo"+u.output.charAt(0).toUpperCase()+u.output.substr(1)+(c?"2D":""),typeof t[a]=="function"&&t[a](l,u,e,o),l)}})})(jQuery);VA011=window.VA011||{},function(n,t){n.InventoryForm=function(){function gs(){gi.empty();pt=[];var n="SELECT M_Warehouse_ID, Name FROM M_Warehouse WHERE AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID")+" AND IsActive = 'Y'";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetOrgWarehouseAll",{value:"",orgs:l,fill:!1},yh)}function yh(n){if(n.length>0)for(var t=0;t<n.length;t++)key=VIS.Utility.Util.getValueOfInt(n[t].ID),value=n[t].Name,gi.append(" <option value="+key+">"+VIS.Utility.encodeText(value)+"<\/option>"),pt.push({id:key,text:value});wh()}function nh(){gi.empty();pt=[];var n="SELECT M_Warehouse_ID, Name FROM M_Warehouse WHERE AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID")+" AND IsActive = 'Y'";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetOrgWarehouseAll",{value:"",orgs:l,fill:!1},ph)}function ph(n){if(n.length>0)for(var t=0;t<n.length;t++)key=VIS.Utility.Util.getValueOfInt(n[t].ID),value=n[t].Name,gi.append(" <option value="+key+">"+VIS.Utility.encodeText(value)+"<\/option>"),pt.push({id:key,text:value})}function wh(){var n="SELECT M_Warehouse_ID, Name FROM M_Warehouse WHERE AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID")+" AND IsActive = 'Y'";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetOrgWarehouseAll",{value:"",orgs:lh,fill:!1},bh)}function bh(n){if(n.length>0){ii.push({id:0,text:""});ue.push({id:0,text:""});for(var t=0;t<n.length;t++)key=VIS.Utility.Util.getValueOfInt(n[t].ID),value=n[t].Name,ii.push({id:key,text:value}),ue.push({id:key,text:value})}kh()}function kh(){nu.empty();var n="SELECT C_BPartner_ID, Name FROM C_BPartner WHERE AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID")+" AND IsActive = 'Y' AND IsVendor = 'Y'";VIS.DB.executeReader(n,null,dh)}function dh(n){for(nu.append(" <option value = 0><\/option>");n.read();)key=VIS.Utility.Util.getValueOfInt(n.getString(0)),value=n.getString(1),nu.append(" <option value="+key+">"+VIS.Utility.encodeText(value)+"<\/option>");n.close();ha()}function gh(n,r,u,f){i.refresh();dt.refresh();t.ajax({url:VIS.Application.contextUrl+"Inventory/"+f,dataType:"json",data:{value:n,orgs:l,fill:u},success:function(n){var i=JSON.parse(n);datasource=[];r(t.map(i,function(n){return{label:n.Name,value:n.Name,ids:n.ID}}));t(iu.div).autocomplete("search","");t(iu.div).trigger("focus")}})}function fe(n,r,u,f){i.refresh();dt.refresh();t.ajax({url:VIS.Application.contextUrl+"Inventory/"+f,dataType:"json",data:{value:n,fill:u},success:function(n){var i=JSON.parse(n);datasource=[];r(t.map(i,function(n){return{label:n.Name,value:n.Name,ids:n.ID}}));t(iu.div).autocomplete("search","");t(iu.div).trigger("focus")}})}function nc(){var r,i,ti,y;fu=t("<td class='VA011-Left-Bar vis-leftsidebarouterwrap'>");lf=t("<div class='vis-apanel-lb' style='overflow:auto'>");io=t("<div class='vis-apanel-lb-toggle' ><i class='vis-apanel-lb-img fa fa-bars'><\/i><\/div>");oi=t("<ul>");wt=t('<div class="vis-apanel-lb-main VA011-div-left-main vis-leftsidebarouterwrap">');$divsearchouter=t('<div class="VA011-searchDiv input-group vis-input-wrap"><\/div>');cf=t('<div class="vis-control-wrap"><\/div>');eu=t('<input placeholder="'+VIS.Msg.getMsg("Search")+'"  data-hasbtn=" "><label>'+VIS.Msg.getMsg("Search")+"<\/label>");ro=t('<div class="input-group-append"><button class=" vis-group-pointer vis-group-search-icon input-group-text" title='+VIS.Msg.getMsg("VA011_Search")+'><i class="vis vis-search"><\/i><\/button><\/div>');cf.append(eu);$divsearchouter.append(cf).append(ro);wt.append($divsearchouter);br=t('<div class="VA011-checkboxlist">');var f=t('<div class="VA011-searchDiv">'),p=t('<div class="input-group vis-input-wrap">'),d=t('<div class="vis-control-wrap">');yr=t('<input class="VA011-inputLeftSearch" placeholder="'+VIS.Msg.getMsg("Organization")+'"  ><i class="VA011-imgCombo fa fa-caret-down"><\/i>');f.append(p);p.append(d);d.append(yr);yr.autocomplete({minLength:0,source:function(n,t){n.term.trim().length!=0&&fe(n.term,t,!1,"GetOrgs")},select:function(n,t){of(t.item.ids,l)||(t.item.ids!=9999?l.push(t.item.ids):(br.children().remove(),l=l.splice()),br.append('<div class="VA011-clsDIV"><i id="VA011_chkOrg'+b+'" value="'+t.item.ids+'" class="vis vis-mark"><\/i><span id=VA011_spnOrg'+b+">"+t.item.value+"<\/span><\/br><\/div>"),b++,v=1,nh(),w(!1))}});wt.append(f);f.append(br);wr=t('<div class="VA011-checkboxlist">');var e=t('<div class="VA011-searchDiv">'),it=t('<div class="input-group vis-input-wrap">'),et=t('<div class="vis-control-wrap">');si=t('<input class="VA011-inputLeftSearch" placeholder="'+VIS.Msg.getMsg("Warehouse")+'"  ><i class="VA011-imgCombo fa fa-caret-down"><\/i>');e.append(it);it.append(et);et.append(si);si.autocomplete({minLength:0,source:function(n,t){n.term.trim().length!=0&&gh(n.term,t,!1,"GetOrgWarehouse")},select:function(n,t){of(t.item.ids,u)||(t.item.ids!=9999?u.push(t.item.ids):(wr.children().remove(),u=u.splice()),wr.append('<div class="VA011-clsDIV"><i id=VA011_chkWh'+b+' value="'+t.item.ids+'" class="vis vis-mark"><\/i><span style="margin-left:5px" id=VA011_spnWh'+b+">"+t.item.value+"<\/span><\/br><\/div>"),b++,v=1,w(!1))}});wt.append(e);e.append(wr);ou=t('<div class="VA011-checkboxlist">');var o=t('<div class="VA011-searchDiv">'),yt=t('<div class="input-group vis-input-wrap">'),pt=t('<div class="vis-control-wrap">');pr=t('<input class="VA011-inputLeftSearch" placeholder="'+VIS.Msg.getMsg("PriceListVersion")+'" ><i class="VA011-imgCombo fa fa-caret-down" ><\/i>');o.append(yt);yt.append(pt);pt.append(pr);pr.autocomplete({minLength:0,source:function(n,t){n.term.trim().length!=0&&fe(n.term,t,!1,"GetPLV")},select:function(n,t){of(t.item.ids,rt)||(t.item.ids!=9999?rt.push(t.item.ids):(ou.children().remove(),rt=rt.splice()),ou.append('<div class="VA011-clsDIV"><i id=VA011_chkPLV'+b+'  value="'+t.item.ids+'" class="vis vis-mark"><\/i><span id=VA011_spnPLV'+b+">"+t.item.value+"<\/span><\/br><\/div>"),b++,v=1,w(!1))}});wt.append(o);o.append(ou);su=t('<div class="VA011-checkboxlist">');var s=t('<div class="VA011-searchDiv">'),bt=t('<div class="input-group vis-input-wrap">'),dt=t('<div class="vis-control-wrap">');tr=t('<input class="VA011-inputLeftSearch" placeholder="'+VIS.Msg.getMsg("VA011_Supplier")+'"  ><i class="VA011-imgCombo fa fa-caret-down"><\/i>');s.append(bt);bt.append(dt);dt.append(tr);tr.autocomplete({minLength:0,source:function(n,t){n.term.trim().length!=0&&fe(n.term,t,!1,"GetSupplier")},select:function(n,t){of(t.item.ids,ut)||(t.item.ids!=9999?ut.push(t.item.ids):(su.children().remove(),ut=ut.splice()),su.append('<div class="VA011-clsDIV"><i id=VA011_chkSupplier'+b+' value="'+t.item.ids+'" class="vis vis-mark"><\/i><span id=VA011_spnSupplier'+b+">"+t.item.value+"<\/span><\/br><\/div>"),b++,v=1,w(!1))}});wt.append(s);s.append(su);hu=t('<div class="VA011-checkboxlist">');var h=t('<div class="VA011-searchDiv">'),gt=t('<div class="input-group vis-input-wrap">'),ni=t('<div class="vis-control-wrap">');kr=t('<input class="VA011-inputLeftSearch" placeholder="'+VIS.Msg.getMsg("VA011_ProductCategory")+'" ><i class="VA011-imgCombo fa fa-caret-down"><\/i>');h.append(gt);gt.append(ni);ni.append(kr);kr.autocomplete({minLength:0,source:function(n,t){n.term.trim().length!=0&&fe(n.term,t,!1,"GetProductCategories")},select:function(n,t){of(t.item.ids,ft)||(t.item.ids!=9999?ft.push(t.item.ids):(hu.children().remove(),ft=ft.splice()),hu.append('<div class="VA011-clsDIV"><i id=VA011_chkCategories'+b+'  value="'+t.item.ids+'" class="vis vis-mark"><\/i><span id=VA011_spnCategories'+b+">"+t.item.value+"<\/span><\/br><\/div>"),b++,v=1,w(!1))}});wt.append(h);h.append(hu);wt.append(oi);lf.append(io);lf.append(wt);fu.append(lf);kt=t('<div class="VA011-right-head VA011-tab-control" style="padding: 0px; width:auto;"><ul class="VA011-tabs" style="overflow: auto;white-space: nowrap;"><li class="VA011-selectedTab" id="VA011_StockDet_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_StockDet")+'<\/li><li id="VA011_GenReplenish_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Replenishments")+'<\/li><\/ul><\/div><div class="VA011_CartLabel"><span id="VA011_CartLabel'+n.windowNo+'"><\/span><\/div><ul class="VA011-toprighticons"><li id="VA011_DisplayReplenishRuleLI_'+n.windowNo+'" style="display:none;"><i class="vis vis-pencil" style="cursor:pointer" title='+VIS.Msg.getMsg("VA011_ReplenishmentRules")+' id="VA011_DisplayReplenishRule_'+n.windowNo+'"><\/i><\/li><li id="VA011_addtoCartLI'+n.windowNo+'" style="display:none;"><i class="fa fa-shopping-cart" style="cursor:pointer" title='+VIS.Msg.getMsg("VA011_AddToCart")+' id="VA011_btnAddToCart_'+n.windowNo+'"><\/i><\/li><li id="VA011_calculateReplenishLI'+n.windowNo+'" style="display:none;"><i class="vis vis-calculator" style="cursor:pointer" title='+VIS.Msg.getMsg("VA011_CalculateReplenishment")+' id="VA011_btnReplenish_'+n.windowNo+'"><\/i><\/li><li id="VA011_generateReplenishLI'+n.windowNo+'" style="display:none"><img style="cursor:pointer" title='+VIS.Msg.getMsg("VA011_GenerateReplenishment")+' id="VA011_btnGenerateReplenish_'+n.windowNo+'" style="opacity: 1; display:none;" src="'+VIS.Application.contextUrl+'Areas/VA011/Images/genrat--replenishment.png"><\/li> <\/ul>');r=t('<div id="111" style="width:100%; height:50%; float:left; padding-bottom:10px "><\/div>');vi=t('<div class="VA011-gridCls"><\/div>');yi=t('<div id="VA011_ReplenishmentGridTop_'+n.windowNo+'" class="VA011-gridCls" style="display:none"><\/div>');a=t('<div class="VA011-right-head VA011-tab-control" style="padding: 0px; margin-top: 10px"><ul class="VA011-tabs VA011_bottomGridHeaderSec" style="overflow: auto;white-space: nowrap;"> <li class="VA011-selectedTab" id="VA011_btnVariant_'+n.windowNo+'" style="margin: 0px 0 0 2px;">'+VIS.Msg.getMsg("VA011_Variants")+'<\/li> <li id="VA011_btnLocators_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Locators")+'<\/li> <li id="VA011_btnOrdered'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Ordered")+'<\/li> <li  id="VA011_btnReplenished_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Replenished")+'<\/li> <li  id="VA011_btnDemand_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Demand")+'<\/li>  <li  id="VA011_btnTransactions_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Transactions")+'<\/li> <li  id="VA011_btnReplenishmentB_'+n.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA011_Replenishment")+"<\/li> <\/ul><\/div>");tt=t('<div id="VA011_bottomGridPanelDiv'+n.windowNo+'" style="width:100%; float:left; height:50%"><\/div>');tt.append(a);rs=t('<div class="VA011-middle-left-main" style="height:100%">').append(r).append(tt);fo=t('<div id="1234" class="VA011-middle-right-main">');i=t('<div class="VA011_form-wrap" style="height:100%"><\/div>');af=t('<div id="VA011_RightSection'+n.windowNo+'" class="VA011-Rightpanel-DetailScroll"  >');c=t('<div class="VA011_form-tabs" style="padding-bottom:0px"><ul class="VA011-tabs" style="overflow:auto; white-space:nowrap"><li id="VA011_btnDetails_'+n.windowNo+'" class="VA011-selectedTab">'+VIS.Msg.getMsg("VA011_Details")+'<\/li><li id="VA011_btnSubsti_'+n.windowNo+'">'+VIS.Msg.getMsg("VA011_Substitute")+'<\/li><li id="VA011_btnRelated_'+n.windowNo+'">'+VIS.Msg.getMsg("VA011_Related")+'<\/li><li id="VA011_btnSuppliers_'+n.windowNo+'">'+VIS.Msg.getMsg("VA011_Suppliers")+'<\/li><li id="VA011_btnKits_'+n.windowNo+'">'+VIS.Msg.getMsg("VA011_Kits")+'<\/li><li id="VA011_btnCart_'+n.windowNo+'">'+VIS.Msg.getMsg("VA011_Cart")+"<\/li><\/ul><\/div>");i.append(c);es=t('<div class="VA011_form-top" class="VA011-RightPanel-Scroll" ><div class="VA011_form-top-fields"><div id="VA011_ProdDetZoomName'+n.windowNo+'" style= "display:none"><h4 id="VA011_prodName_'+n.windowNo+'" style="float:left; margin-top: 0;"><\/h4><span id="VA011_ZoomProduct" title='+VIS.Msg.getMsg("VA011_ZoomToProduct")+' class="VA011-icons VA011-icons-font vis vis-edit" style="margin-top:5px"><\/span><\/div><div style="float:left; width:100%" class="VA011_data-wrap" id="VA011_UPC'+n.windowNo+'"><p>'+VIS.Msg.getMsg("VA011_UPC")+'<\/p><\/div><div style="float:left;" class="VA011_data-wrap" id="VA011_AttributeSet'+n.windowNo+'"><p>'+VIS.Msg.getMsg("VA011_AttributeSet")+'<\/p><\/div><\/div><!-- end of form-top-fields --><div class="VA011_image-wrap" style="text-align: center; line-height: 158px;"><\/div><\/div>');af.append(es);co=t('<div class="VA011_form-fullFields"><div class="VA011_form-tabs" ><ul class="VA011-tabs"><li id="VA011_btnDetails_'+n.windowNo+'" class="VA011-selectedTab">'+VIS.Msg.getMsg("VA011_Details")+'<\/li><li style="display:none;" id="VA011_btnStatistics_'+n.windowNo+'">'+VIS.Msg.getMsg("VA011_Statistics")+'<\/li><\/ul><\/div><div class="VA011_form-data"><label>'+VIS.Msg.getMsg("VA011_Weight")+'<\/label><input id="VA011_inputWeight_'+n.windowNo+'" readonly="readOnly" type="text"><\/div><div class="VA011_form-data"><label>'+VIS.Msg.getMsg("VA011_Volume")+'<\/label><input id="VA011_inputVolume_'+n.windowNo+'" readonly="readOnly" type="text"><\/div><div class="VA011_form-data"><label>'+VIS.Msg.getMsg("VA011_Tare")+'<\/label><input id="VA011_inputTare_'+n.windowNo+'" readonly="readOnly" type="text"><\/div><div class="VA011_form-data"><label>'+VIS.Msg.getMsg("VA011_Locator")+'<\/label><input id="VA011_inputLocator_'+n.windowNo+'" readonly="readOnly" type="text"><\/div><div class="VA011_form-data"><label>'+VIS.Msg.getMsg("VA011_ExpiryDays")+'<\/label><input id="VA011_inputExpDays_'+n.windowNo+'" readonly="readOnly" type="text"><\/div><div class="VA011_form-data"><label>'+VIS.Msg.getMsg("VA011_UOM")+'<\/label><input id="VA011_inputUOM_'+n.windowNo+'" readonly="readOnly" type="text"><\/div><\/div><!-- end of form-fullFields -->');af.append(co);i.append(af);wo=t('<div  id="VA011_grdSubstitute_'+n.windowNo+'" class="VA011_form-wrap VA011-rightPanelGridCls" style="display:none; padding:0px"><\/div>');uc();oe();i.append(wo);vo=t('<div  id="VA011_grdRelated_'+n.windowNo+'" class="VA011_form-wrap VA011-rightPanelGridCls" style="display:none; padding:0px"><\/div>');ec();se();i.append(vo);yo=t('<div  id="VA011_grdSuppliersRight_'+n.windowNo+'" class="VA011_form-wrap VA011-rightPanelGridCls" style="display:none; padding:0px"><\/div>');sc();he();i.append(yo);po=t('<div  id="VA011_grdKits_'+n.windowNo+'" class="VA011_form-wrap VA011-rightPanelGridCls" style="display:none; padding:0px"><\/div>');cc();ce();i.append(po);i.append('<div id="VA011_divCart_'+n.windowNo+'" class="VA011-right-head"><div id="VA011_divCartList_'+n.windowNo+'" class="VA011-conv-data"><div class="VA011-conversion-data"><div class="input-group vis-input-wrap"><div class="vis-control-wrap"><select id="VA011_cmbCart_'+n.windowNo+'"><\/select><label>'+VIS.Msg.getMsg("VA011_Cart")+'<\/label><\/div><\/div><\/div><div style="margin-top: 10px;"><span class="VA011-icons vis vis-plus VA011-icons-font" title="'+VIS.Msg.getMsg("VA011_AddNewCart")+'"><\/span><span class="VA011-icons vis vis-edit VA011-icons-font" title="'+VIS.Msg.getMsg("Edit")+'"><\/span><span class="VA011-icons vis vis-refresh VA011-icons-font" title="'+VIS.Msg.getMsg("VA011_Refresh")+'"><\/span><span class="VA011-cart-update" style="display:none;"><\/span><\/div><\/div><div id="VA011_divNewCart_'+n.windowNo+'" class="VA011-conv-data"><div class="VA011-conversion-data"><input id="VA011_scanName_'+n.windowNo+'"><\/div><div style="float:left;margin-top: 5px;"><span id="VA011_SaveScanName_'+n.windowNo+'" class="VA011-icons vis vis-save VA011-icons-font" tabindex="0" title="'+VIS.Msg.getMsg("Save")+'"><\/span><span id="VA011_btnCancelScan_'+n.windowNo+'" class="VA011-icons vis vis-mark VA011-icons-font" tabindex="0" title="'+VIS.Msg.getMsg("Cancel")+'"><\/span><\/div><\/div><\/div>');g=t('<div class="VA011-rightPanelCartGridCls" >');i.append(g);k=i.find("#VA011_divCart_"+n.windowNo);cu=i.find("#VA011_divCartList_"+n.windowNo);dr=i.find("#VA011_divNewCart_"+n.windowNo);k.hide();dr.hide();g.hide();os=k.find(".vis-plus");ss=k.find(".vis-edit");hs=k.find(".vis-refresh");nt=k.find("#VA011_cmbCart_"+n.windowNo);rr=i.find("#VA011_scanName_"+n.windowNo);lo=i.find("#VA011_SaveScanName_"+n.windowNo);ao=i.find("#VA011_btnCancelScan_"+n.windowNo);i.find(".VA011-cart-update").text(VIS.Msg.getMsg("Updated"));fo.append(i);hf=t("<td>");uo=t('<div style="position: relative;width: 100%;height: 100%;">');ti=t('<div class="VA011-middle-div-main">').append(rs).append(fo).append();uo.append(ti);hf.append(uo);is=t("<tr>").append(fu).append(hf);to=t("<table style='width:100%;height:100%;background-color:white;' class='vis-forms-container' >");to.append(is);vr.append(to);br.append('<div class="VA011-clsDIV"><i id=VA011_chkOrg'+b+' value="'+VIS.context.getContext("#AD_Org_ID")+'" class="vis vis-mark"><\/i><span id=VA011_spnOrg'+b+">"+VIS.context.getContext("#AD_Org_Name")+"<\/span><\/br><\/div>");l.push(VIS.Utility.Util.getValueOfInt(VIS.context.getContext("#AD_Org_ID")));b++;VIS.Utility.Util.getValueOfInt(VIS.context.getContext("#M_Warehouse_ID"))>0&&(wr.append('<div class="VA011-clsDIV"><i id=VA011_chkWh'+b+'  value="'+VIS.context.getContext("#M_Warehouse_ID")+'" class="vis vis-mark"><\/i><span id=VA011_spnWh'+b+">"+VIS.context.getContext("#M_Warehouse_Name")+"<\/span><\/br><\/div>"),u.push(VIS.Utility.Util.getValueOfInt(VIS.context.getContext("#M_Warehouse_ID"))),b++);al();w(!1);r.append(kt).append(vi);cl();ll();r.append(yi);er=t('<div class="VA011-gridstatusbar"><\/div>');ki=t('<ul class="vis-statusbar-ul"><\/ul>');vs=t('<li  style="opacity: 0.6; float:left"><div><i class="vis vis-shiftleft" style="opacity: 1;" action="first" title="First Page"><\/i><\/div><\/li>');ki.append(vs);as=t('<li style="opacity: 0.6;  float:left"><div><i class="vis vis-pageup" style="opacity: 1;" action="prev" title="Page Up"><\/i><\/div><\/li>');ki.append(as);y=t('<li style="float:left"><\/li>');y.append(di);ki.append(y);ys='<li style="opacity: 1;  float:left"><div><i class="vis vis-pagedown" style="opacity: 1;" action="next" title="Page Down"><\/i><\/div><\/li>';ki.append(ys);ps='<li style="opacity: 1;  float:left"><div><i class="vis vis-shiftright" style="opacity: 1;" action="last" title="Last Page"><\/i><\/div><\/li>';ki.append(ps);er.append(ki);r.append(er);ot=t('<div class="VA011-gridCls"><\/div>');ac();ru();tt.append(ot);st=t('<div class="VA011-gridCls" style="display:none"><\/div>');yc();le();tt.append(st);ht=t('<div class="VA011-gridCls" style="display:none"><\/div>');wc();ae();tt.append(ht);ct=t('<div class="VA011-gridCls" style="display:none"><\/div>');kc();ve();tt.append(ct);lt=t('<div class="VA011-gridCls" style="display:none"><\/div>');dc();ye();tt.append(lt);at=t('<div class="VA011-gridCls" style="display:none"><\/div>');nl();pe();tt.append(at);vt=t('<div class="VA011-gridCls" style="display:none"><\/div>');kl();dl()}function of(n,t){return t.indexOf(n)>-1}function tc(){cartGrid=null;cartGrid=g.w2grid({name:"gridcart_"+n.windowNo,recordHeight:25,show:{toolbar:!0,selectColumn:!0,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},records:[],columns:[{field:"product_ID",caption:"product_ID",sortable:!1,size:"80px",display:!1},{field:"Product",caption:"<div><span>"+VIS.Msg.translate(VIS.Env.getCtx(),"Product")+"<\/span><\/div>",sortable:!1,size:"35%",hidden:!1},{field:"Qty",caption:"<div><span>"+VIS.Msg.getElement(VIS.Env.getCtx(),"Quantity")+"<\/span><\/div>",sortable:!1,size:"15%",hidden:!1,style:"text-align: right",editable:{type:"float"},render:function(n){var t=n.Qty;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"C_Uom_ID",caption:"<div><span>"+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+"<\/span><\/div>",sortable:!1,size:"15%",hidden:!1,editable:{type:"select",items:fr,showAll:!0},render:function(n,t,i){var u="",r;for(r in fr)fr[r].id==this.getCellValue(t,i)&&(u=fr[r].text);return u}},{field:"attribute_ID",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"M_AttributeSetInstance_ID"),sortable:!1,size:"80px",display:!1},{field:"Attribute",caption:"<div><span>"+VIS.Msg.translate(VIS.Env.getCtx(),"Attribute")+"<\/span><\/div>",sortable:!1,size:"35%",hidden:!1,render:function(){return'<div><input type=text readonly="readonly" style= "width:85%; border:none" ><i class="fa fa-list-alt VA005-gridicon" title="Attribute Set Instance"><\/i><\/div>'}},{field:"UPC",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"UPC"),sortable:!1,size:"80px",editable:{type:"text"}},{field:"LineID",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"VAICNT_InventoryCountLine_ID"),sortable:!1,size:"80px",display:!1},{field:"updated",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"Updated"),sortable:!1,size:"80px",display:!1}],onChange:function(n){cartGrid.records[n.index].updated=!0;n.column==2?cartGrid.records[n.index].Qty=n.value_new:n.column==3&&(cartGrid.records[n.index].C_Uom_ID=n.value_new)},onClick:function(i){var u,f;if(i.column==5&&cartGrid.records.length>0)if(u="SELECT M_AttributeSet_ID FROM M_Product WHERE M_Product_ID = "+VIS.Utility.Util.getValueOfInt(cartGrid.records[i.recid-1].product_ID),f=VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(u)),f!=0){var e=ls==8418,o=VIS.context.getContextAsInt(n.windowNo,"M_Locator_ID"),s=VIS.context.getContextAsInt(n.windowNo,"C_BPartner_ID"),r=new VIS.PAttributesForm(VIS.Utility.Util.getValueOfInt(cartGrid.records[i.recid-1].attribute_ID),VIS.Utility.Util.getValueOfInt(cartGrid.records[i.recid-1].product_ID),o,s,e,ls,n.windowNo);r.hasAttribute&&r.showDialog();r.onClose=function(r,u){cartGrid.records[i.recid-1].attribute_ID!=r&&(cartGrid.records[i.recid-1].attribute_ID=r,cartGrid.records[i.recid-1].Attribute=u,t("#grid_gridcart_"+n.windowNo+"_rec_"+i.recid).find("input[type=text]").val(u),cartGrid.records[i.recid-1].updated=!0)}}else return},onDelete:function(n){n.preventDefault();da()},onSubmit:function(n){n.preventDefault();ka()},onColumnOnOff:function(n){n.onComplete=function(){nr()}}});cartGrid.hideColumn("product_ID");cartGrid.hideColumn("attribute_ID");cartGrid.hideColumn("UPC");cartGrid.hideColumn("LineID");cartGrid.hideColumn("updated");ee()}function ic(i){for(nt.append(" <option value = 0><\/option>");i.read();)key=VIS.Utility.Util.getValueOfInt(i.getString(0)),value=i.getString(1),nt.append(" <option value="+key+">"+VIS.Utility.encodeText(value)+"<\/option>");i.close();nt.val(vf);t("#VA011_CartLabel"+n.windowNo).text(nt.find("option:selected").text());ea()}function nr(){if(!y)if(t("#VA011_RightSection"+n.windowNo).css("display","none"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),t("#VA011_divCart_"+n.windowNo).css("display","block"),k.show(),g.show(),r[0].style.visibility="visible",multiValues=[],cartGrid.clear(),nt.val()>0){var i="",i="SELECT po.VAICNT_InventoryCountLine_ID,po.M_Product_ID,prd.Name, po.C_UOM_ID, u.Name AS UOM, po.UPC, po.M_AttributeSetInstance_ID, ats.Description, po.VAICNT_Quantity, prd.M_AttributeSet_ID FROM VAICNT_InventoryCountLine po LEFT JOIN C_UOM u ON po.C_UOM_ID = u.C_UOM_ID LEFT JOIN M_Product prd ON po.M_Product_ID= prd.M_Product_ID LEFT JOIN M_AttributeSetInstance ats ON po.M_AttributeSetInstance_ID = ats.M_AttributeSetInstance_ID WHERE po.VAICNT_InventoryCount_ID = "+nt.val();VIS.DB.executeDataSet(i.toString(),null,rc)}else r[0].style.visibility="hidden"}function rc(i){var e=0,u,f,o;if(i!=null&&i.tables[0].rows.length>0)for(u=0;u<i.tables[0].rows.length;u++)e=e+1,multiValues.push({recid:e,LineID:i.tables[0].rows[u].cells.vaicnt_inventorycountline_id,product_ID:i.tables[0].rows[u].cells.m_product_id,Product:i.tables[0].rows[u].cells.name,C_Uom_ID:VIS.Utility.Util.getValueOfInt(i.tables[0].rows[u].cells.c_uom_id),attribute_ID:VIS.Utility.Util.getValueOfInt(i.tables[0].rows[u].cells.m_attributesetinstance_id),Attribute:i.tables[0].rows[u].cells.description,UPC:i.tables[0].rows[u].cells.upc,Qty:parseFloat(i.tables[0].rows[u].cells.vaicnt_quantity).toLocaleString(),updated:!1});for(w2utils.encodeTags(multiValues),cartGrid.add(multiValues),f=0;f<cartGrid.records.length;f++)t("#grid_gridcart_"+n.windowNo+"_rec_"+cartGrid.records[f].recid).find("input[type=text]").val(multiValues[f].Attribute),o="SELECT M_AttributeSet_ID FROM M_Product WHERE M_Product_ID = "+multiValues[f].product_ID,VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(o))<=0&&(t("#grid_gridcart_"+n.windowNo+"_rec_"+cartGrid.records[f].recid).find("input:not([type='checkbox'])").hide(),t("#grid_gridcart_"+n.windowNo+"_rec_"+cartGrid.records[f].recid).find("i").hide());multiValues=[];r[0].style.visibility="hidden"}function uc(){bi=null;bi=wo.w2grid({name:"VA011_gridSubstitute_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Product",caption:VIS.Msg.getMsg("VA011_Product"),sortable:!1,size:"36%"},{field:"QtyOnHand",caption:"<div><span>"+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOnHand;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"UOM",caption:VIS.Msg.getMsg("VA011_UOM"),sortable:!1,size:"16%"},{field:"Reserved",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Reserved")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Reserved;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"ATP",caption:"<div><span>"+VIS.Msg.getMsg("VA011_ATP")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,style:"text-align: right",render:function(n){var t=n.ATP;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&bi.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});bi.hideColumn("attribute_ID");bi.hideColumn("M_Product_ID")}function oe(){var o,e,i,f;if(!y){for(t("#VA011_RightSection"+n.windowNo).css("display","none"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","block"),t("#VA011_gridRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),r[0].style.visibility="visible",nf=[],o=0,bi.clear(),o=o+1,e="",e="SELECT DISTINCT p.Name as Product, p.M_Product_ID, u.Name AS UOM , (bomQtyOnHand(p.M_Product_ID,w.M_Warehouse_ID,0)) AS QtyOnHand, bomQtyAvailable(p.M_Product_ID,w.M_Warehouse_ID,0) AS QtyAvailable, (bomQtyReserved(p.M_Product_ID,w.M_Warehouse_ID,0))  AS QtyReserved FROM M_Substitute s INNER JOIN M_Product p ON (p.M_Product_ID = s.SUBSTITUTE_ID) INNER JOIN C_UOM u ON (p.C_UOM_ID = u.C_UOM_ID) LEFT OUTER JOIN M_Storage st  ON (st.M_Product_ID = p.M_Product_ID) LEFT OUTER JOIN M_Locator l ON (st.M_Locator_ID = l.M_Locator_ID) LEFT OUTER JOIN M_Warehouse w ON (w.M_Warehouse_ID = l.M_Warehouse_ID) WHERE s.IsActive='Y' AND s.M_Product_ID = "+h,i="",f=0;f<u.length;f++)i=i.length>0?i+", "+u[f]:i+u[f];i.length>0&&(e+=" AND w.M_Warehouse_ID IN ("+i+")");VIS.DB.executeReader(e.toString(),null,fc)}}function fc(n){var i=0,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,nf.push({recid:i,Product:n.tables[0].rows[t].cells.product,QtyOnHand:parseFloat(n.tables[0].rows[t].cells.qtyonhand).toLocaleString(),UOM:n.tables[0].rows[t].cells.uom,Reserved:parseFloat(n.tables[0].rows[t].cells.qtyreserved).toLocaleString(),ATP:parseFloat(n.tables[0].rows[t].cells.qtyavailable).toLocaleString(),M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(nf);bi.add(nf);nf=[];y||(r[0].style.visibility="hidden")}function ec(){ur=null;ur=vo.w2grid({name:"VA011_gridRelated_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Product",caption:VIS.Msg.getMsg("VA011_Product"),sortable:!1,size:"36%"},{field:"QtyOnHand",caption:"<div><span>"+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOnHand;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"UOM",caption:VIS.Msg.getMsg("VA011_UOM"),sortable:!1,size:"16%"},{field:"Reserved",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Reserved")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Reserved;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"ATP",caption:"<div><span>"+VIS.Msg.getMsg("VA011_ATP")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.ATP;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&ur.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});ur.hideColumn("M_Product_ID")}function se(){var o,e,i,f;if(!y){for(t("#VA011_RightSection"+n.windowNo).css("display","none"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","block"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),r[0].style.visibility="visible",ku=[],o=0,ur.clear(),o=o+1,e="",e="SELECT DISTINCT p.Name as Product, p.M_Product_ID, u.Name AS UOM , (bomQtyOnHand(p.M_Product_ID,w.M_Warehouse_ID,0)) AS QtyOnHand, bomQtyAvailable(p.M_Product_ID,w.M_Warehouse_ID,0) AS QtyAvailable, (bomQtyReserved(p.M_Product_ID,w.M_Warehouse_ID,0))  AS QtyReserved FROM M_RelatedProduct s INNER JOIN M_Product p ON (p.M_Product_ID = s.RelatedProduct_ID) INNER JOIN C_UOM u ON (p.C_UOM_ID = u.C_UOM_ID) LEFT OUTER JOIN M_Storage st  ON (st.M_Product_ID = p.M_Product_ID) LEFT OUTER JOIN M_Locator l ON (st.M_Locator_ID = l.M_Locator_ID) LEFT OUTER JOIN M_Warehouse w ON (w.M_Warehouse_ID = l.M_Warehouse_ID) WHERE s.IsActive='Y' AND s.M_Product_ID = "+h,i="",f=0;f<u.length;f++)i=i.length>0?i+", "+u[f]:i+u[f];i.length>0&&(e+=" AND w.M_Warehouse_ID IN ("+i+")");VIS.DB.executeReader(e.toString(),null,oc)}}function oc(n){var i=0,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,ku.push({recid:i,Product:n.tables[0].rows[t].cells.product,QtyOnHand:parseFloat(n.tables[0].rows[t].cells.qtyonhand).toLocaleString(),UOM:n.tables[0].rows[t].cells.uom,Reserved:parseFloat(n.tables[0].rows[t].cells.qtyreserved).toLocaleString(),ATP:parseFloat(n.tables[0].rows[t].cells.qtyavailable).toLocaleString(),M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(ku);ur.add(ku);ku=[];y||(r[0].style.visibility="hidden")}function sc(){pi=null;pi=yo.w2grid({name:"VA011_gridSuppliersRight_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Supplier",caption:VIS.Msg.getMsg("VA011_Supplier"),sortable:!1,size:"36%"},{field:"QtyOrderPack",caption:"<div><span>"+VIS.Msg.getMsg("VA011_QtyOrderPack")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOrderPack;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"UOM",caption:VIS.Msg.getMsg("VA011_UOM"),sortable:!1,size:"16%"},{field:"MinOrder",caption:"<div><span>"+VIS.Msg.getMsg("VA011_MinOrder")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,style:"text-align: right",render:function(n){var t=n.MinOrder;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"DeliveryTime",caption:"<div><span>"+VIS.Msg.getMsg("VA011_DeliveryTime")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,render:"number:2"},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&pi.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});pi.hideColumn("attribute_ID");pi.hideColumn("M_Product_ID")}function he(){var i,u;y||(t("#VA011_RightSection"+n.windowNo).css("display","none"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","block"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),r[0].style.visibility="visible",du=[],i=0,pi.clear(),i=i+1,u="",u="SELECT bp.name  AS Supplier, po.order_pack AS QtyOrderPack, u.Name AS UOM, po.order_min AS MinOrder, po.deliverytime_promised AS DeliveryTime, po.M_Product_ID FROM M_Product_PO po INNER JOIN C_BPartner bp  ON (bp.C_BPartner_ID = po.C_BPartner_ID) Left outer join C_UOM u on (u.C_UOM_ID = po.C_UOM_ID) WHERE po.IsActive = 'Y' AND po.M_Product_ID = "+h,VIS.DB.executeReader(u.toString(),null,hc))}function hc(n){var i=0,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,du.push({recid:i,Supplier:n.tables[0].rows[t].cells.supplier,QtyOrderPack:parseFloat(n.tables[0].rows[t].cells.qtyorderpack).toLocaleString(),UOM:n.tables[0].rows[t].cells.uom,MinOrder:parseFloat(n.tables[0].rows[t].cells.minorder).toLocaleString(),DeliveryTime:n.tables[0].rows[t].cells.deliverytime,M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(du);pi.add(du);du=[];y||(r[0].style.visibility="hidden")}function cc(){wi=null;wi=po.w2grid({name:"VA011_gridKits_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Product",caption:VIS.Msg.getMsg("VA011_Product"),sortable:!1,size:"36%"},{field:"Factor",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Factor")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,render:"number:2"},{field:"UOM",caption:VIS.Msg.getMsg("VA011_UOM"),sortable:!1,size:"16%"},{field:"QtyOnHand",caption:"<div><span>"+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOnHand;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"ATP",caption:"<div><span>"+VIS.Msg.getMsg("VA011_ATP")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,style:"text-align: right",render:function(n){var t=n.ATP;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&wi.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});wi.hideColumn("attribute_ID");wi.hideColumn("M_Product_ID")}function ce(){var o,e,i,f;if(!y){for(t("#VA011_RightSection"+n.windowNo).css("display","none"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","block"),k.hide(),g.hide(),r[0].style.visibility="visible",gu=[],o=0,wi.clear(),o=o+1,e="",e="SELECT DISTINCT p.Name as Product, u.Name as UOM, bomQtyOnHand(b.M_Product_ID,w.M_Warehouse_ID,0) AS QtyOnHand, bomQtyAvailable(b.M_Product_ID,w.M_Warehouse_ID,0) AS QtyAvailable, b.BOMQty AS Factor FROM M_Product_BOM b INNER JOIN M_Product p ON p.M_Product_ID = b.M_Product_ID INNER JOIN C_UOM u ON (p.C_UOM_ID = u.C_UOM_ID)  LEFT OUTER JOIN M_Storage st ON (st.M_Product_ID = p.M_Product_ID) LEFT OUTER JOIN M_Locator l ON (st.M_Locator_ID = l.M_Locator_ID) LEFT OUTER JOIN M_Warehouse w  ON (w.M_Warehouse_ID    = l.M_Warehouse_ID) WHERE b.IsActive='Y' AND b.M_ProductBOM_ID = "+h,i="",f=0;f<u.length;f++)i=i.length>0?i+", "+u[f]:i+u[f];i.length>0&&(e+=" AND w.M_Warehouse_ID IN ("+i+")");VIS.DB.executeReader(e.toString(),null,lc)}}function lc(n){var i=0,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,gu.push({recid:i,Product:n.tables[0].rows[t].cells.product,Factor:n.tables[0].rows[t].cells.factor,UOM:n.tables[0].rows[t].cells.uom,QtyOnHand:parseFloat(n.tables[0].rows[t].cells.qtyonhand).toLocaleString(),ATP:parseFloat(n.tables[0].rows[t].cells.qtyavailable).toLocaleString(),M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(gu);wi.add(gu);gu=[];y||(r[0].style.visibility="hidden")}function ac(){dt=null;dt=ot.w2grid({name:"VA011_gridVariant_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Attribute",caption:VIS.Msg.getMsg("VA011_Attribute"),sortable:!1,size:"29%"},{field:"QtyOnHand",caption:"<div><span>"+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"11%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOnHand;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"UOM",caption:VIS.Msg.getMsg("VA011_UOM"),sortable:!1,size:"11%"},{field:"SerialNo",caption:VIS.Msg.getMsg("VA011_SerialNo"),sortable:!1,size:"11%"},{field:"LotNo",caption:VIS.Msg.getMsg("VA011_LotNo"),sortable:!1,size:"11%"},{field:"ExpDate",caption:VIS.Msg.getMsg("VA011_ExpiryDate"),sortable:!1,size:"16%"},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&dt.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});dt.hideColumn("attribute_ID");dt.hideColumn("M_Product_ID")}function ru(){var f,i,t,e,n;for(r[0].style.visibility="visible",au=[],f=0,dt.clear(),f=f+1,i="",t="",n=0;n<l.length;n++)t.length>0?t=t+", "+l[n]:(t+="0, ",t+=l[n]);if(i="SELECT Name,  M_Product_ID,  UOM,  lot,  serno,  guaranteedate,  SUM(QtyOnHand) AS QtyOnHand,  M_AttributeSetInstance_ID,  Description FROM  ( ",u.length>0)for(e="",n=0;n<u.length;n++)i+=n==0?" SELECT distinct p.Name, p.M_Product_ID, u.Name as UOM, ats.lot, ats.serno, ats.guaranteedate, bomQtyOnHandAttr(p.M_Product_ID, s.M_AttributeSetInstance_ID ,w.M_Warehouse_ID,0) AS QtyOnHand,  s.M_AttributeSetInstance_ID, ats.Description FROM M_Storage s INNER JOIN M_AttributeSetInstance ats ON (s.M_AttributeSetInstance_ID = ats.M_AttributeSetInstance_ID)  INNER JOIN M_LOcator l ON (l.M_Locator_ID = s.M_Locator_ID) INNER JOIN M_Warehouse w ON (w.M_Warehouse_ID = l.M_Warehouse_ID)  INNER JOIN M_Product p ON (p.M_Product_ID = s.M_Product_ID) INNER JOIN C_UOM u ON (p.C_UOM_ID = u.C_UOM_ID) WHERE w.M_Warehouse_ID = "+u[n]+" AND s.M_Product_ID = "+h:"  UNION SELECT distinct p.Name, p.M_Product_ID, u.Name as UOM, ats.lot, ats.serno, ats.guaranteedate, bomQtyOnHandAttr(p.M_Product_ID, s.M_AttributeSetInstance_ID ,w.M_Warehouse_ID,0) AS QtyOnHand,  s.M_AttributeSetInstance_ID, ats.Description FROM M_Storage s INNER JOIN M_AttributeSetInstance ats ON (s.M_AttributeSetInstance_ID = ats.M_AttributeSetInstance_ID)  INNER JOIN M_LOcator l ON (l.M_Locator_ID = s.M_Locator_ID) INNER JOIN M_Warehouse w ON (w.M_Warehouse_ID = l.M_Warehouse_ID)  INNER JOIN M_Product p ON (p.M_Product_ID = s.M_Product_ID) INNER JOIN C_UOM u ON (p.C_UOM_ID = u.C_UOM_ID) WHERE w.M_Warehouse_ID = "+u[n]+" AND s.M_Product_ID = "+h,t.length>0&&(i+=" AND w.AD_Org_ID IN ("+t+")"),i+=" ) GROUP BY Name,  M_Product_ID,  UOM,  lot,  serno,  M_AttributeSetInstance_ID,  guaranteedate,  Description";else i+="SELECT distinct p.Name, p.M_Product_ID, u.Name as UOM, ats.lot, ats.serno, ats.guaranteedate, bomQtyOnHandAttr(p.M_Product_ID, s.M_AttributeSetInstance_ID ,w.M_Warehouse_ID,0) AS QtyOnHand,  s.M_AttributeSetInstance_ID, ats.Description FROM M_Storage s INNER JOIN M_AttributeSetInstance ats ON (s.M_AttributeSetInstance_ID = ats.M_AttributeSetInstance_ID)  INNER JOIN M_LOcator l ON (l.M_Locator_ID = s.M_Locator_ID) INNER JOIN M_Warehouse w ON (w.M_Warehouse_ID = l.M_Warehouse_ID)  INNER JOIN M_Product p ON (p.M_Product_ID = s.M_Product_ID) INNER JOIN C_UOM u ON (p.C_UOM_ID = u.C_UOM_ID) WHERE s.M_Product_ID = "+h,t.length>0&&(i+=" AND w.AD_Org_ID IN ("+t+")"),i+=") GROUP BY Name,  M_Product_ID,  UOM,  lot,  serno,  M_AttributeSetInstance_ID,  guaranteedate,  Description";VIS.DB.executeReader(i.toString(),null,vc)}function vc(n){var i=0,u=null,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,u=n.tables[0].rows[t].cells.guaranteedate==null?null:ai(n.tables[0].rows[t].cells.guaranteedate),au.push({recid:i,Attribute:n.tables[0].rows[t].cells.description,QtyOnHand:parseFloat(n.tables[0].rows[t].cells.qtyonhand).toLocaleString(),UOM:n.tables[0].rows[t].cells.uom,SerialNo:n.tables[0].rows[t].cells.serno,LotNo:n.tables[0].rows[t].cells.lot,ExpDate:u,M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(au);dt.add(au);au=[];y||(r[0].style.visibility="hidden")}function yc(){hi=null;hi=st.w2grid({name:"VA011_gridLocator_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Warehouse",caption:VIS.Msg.getMsg("VA011_Warehouse"),sortable:!1,size:"15%"},{field:"Locator",caption:VIS.Msg.getMsg("VA011_Locator"),sortable:!1,size:"15%"},{field:"Attribute",caption:VIS.Msg.getMsg("VA011_Attribute"),sortable:!1,size:"20%"},{field:"Quantity",caption:"<div><span>"+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"15%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Quantity;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Unconfirmed",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Unconfirmed")+"<\/span><\/div>",sortable:!1,size:"15%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Unconfirmed;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"LastReceipt",caption:VIS.Msg.getMsg("VA011_LastReceipt"),sortable:!1,size:"15%"},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&hi.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});hi.hideColumn("attribute_ID");hi.hideColumn("M_Product_ID")}function le(){var e,t,n;if(!y){for(r[0].style.visibility="visible",vu=[],e=0,hi.clear(),e=e+1,t="",n=0;n<l.length;n++)t.length>0?t=t+", "+l[n]:(t+="0, ",t+=l[n]);var i="",f="SELECT p.Name, p.M_Product_ID, l.M_Locator_ID, p.Value, w.Name as Warehouse, l.Value as Locator, s.M_AttributeSetInstance_ID, asi.Description, (SELECT MAX(io.DateAcct) FROM M_InoutLine iol  INNER JOIN M_Inout io ON (io.M_Inout_ID      = iol.M_Inout_ID) WHERE iol.M_Product_ID = p.M_Product_ID  AND io.IsSOTrx = 'N' AND iol.M_Locator_ID = l.M_Locator_ID) as LastReceipt,  (SELECT NVL(SUM(lc.targetqty),0) FROM m_inoutlineconfirm lc INNER JOIN m_inoutconfirm ioc ON (ioc.M_InoutConfirm_ID = lc.M_InoutConfirm_ID) INNER JOIN m_inoutline iol ON (iol.M_Inoutline_ID = lc.m_inoutLine_ID) INNER JOIN m_inout io ON (iol.M_Inout_ID = io.m_inout_ID)  WHERE ioc.docstatus NOT IN  ('CO', 'CL')  AND io.IsSOTrx = 'N'  AND iol.M_Locator_ID  = l.M_Locator_ID) as QtyUnconfirmed,  SUM(s.QtyOnHand) AS QtyOnHand  FROM M_Product p INNER JOIN M_Storage s  ON (s.M_Product_ID = p.M_Product_ID) INNER JOIN M_Locator l ON (l.M_Locator_ID = s.M_Locator_ID) INNER JOIN M_Warehouse w  ON (l.M_Warehouse_ID = w.M_Warehouse_ID) LEFT OUTER JOIN M_AttributeSetInstance asi  ON (s.M_AttributeSetInstance_ID = asi.M_AttributeSetInstance_ID) WHERE p.M_Product_ID = "+h+" AND p.AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID"),o=" GROUP BY p.Name, p.M_Product_ID, l.M_Locator_ID, p.Value, w.Name, l.Value, s.M_AttributeSetInstance_ID, asi.Description,  w.M_Warehouse_ID  ";if(t.length>0&&(f+=" AND w.AD_Org_ID IN ("+t+")"),u.length>0){for(n=0;n<u.length;n++)i+=n==0?" ( "+f+" AND w.M_Warehouse_ID = "+u[n]+o:" UNION "+f+" AND w.M_Warehouse_ID = "+u[n]+o;i+="  ) ORDER BY Name"}else i+=f+o+" Order by p.name ";VIS.DB.executeDataSet(i.toString(),null,pc)}}function pc(n){var i=0,u=null,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,u=n.tables[0].rows[t].cells.lastreceipt==null?null:ai(n.tables[0].rows[t].cells.lastreceipt),vu.push({recid:i,Warehouse:n.tables[0].rows[t].cells.warehouse,Locator:n.tables[0].rows[t].cells.locator,Quantity:parseFloat(n.tables[0].rows[t].cells.qtyonhand).toLocaleString(),Unconfirmed:parseFloat(n.tables[0].rows[t].cells.qtyunconfirmed).toLocaleString(),Attribute:n.tables[0].rows[t].cells.description,LastReceipt:u,M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(vu);hi.add(vu);vu=[];r[0].style.visibility="hidden"}function wc(){ci=null;ci=ht.w2grid({name:"VA011_gridOrdered_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"DatePromised",caption:VIS.Msg.getMsg("VA011_DatePromised"),sortable:!1,size:"20%"},{field:"Quantity",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Quantity")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Quantity;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"DateOrdered",caption:VIS.Msg.getMsg("VA011_DateOrdered"),sortable:!1,size:"20%"},{field:"Supplier",caption:VIS.Msg.getMsg("VA011_Supplier"),sortable:!1,size:"20%"},{field:"QtyReserved",caption:"<div><span>"+VIS.Msg.getMsg("VA011_OnOrder")+"<\/span><\/div>",sortable:!1,size:"10%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyReserved;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&ci.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});ci.hideColumn("attribute_ID");ci.hideColumn("M_Product_ID")}function ae(){var f,n,t,i;if(!y){for(r[0].style.visibility="visible",yu=[],f=0,ci.clear(),f=f+1,n="",t=0;t<u.length;t++)n=n.length>0?n+", "+u[t]:n+u[t];i="SELECT ol.datepromised, o.dateordered, ol.m_product_ID, ol.qtyordered, ol.qtyentered, ol.qtyreserved, bp.name as supplier FROM c_order o INNER JOIN c_Orderline ol ON (ol.c_ORder_ID = o.C_Order_ID)  inner join c_bpartner bp on (bp.c_BPartner_ID = o.C_Bpartner_ID) WHERE o.IsSOTrx = 'N' AND o.IsReturnTrx = 'N' AND ol.QtyReserved > 0 AND o.DocStatus IN ('CO', 'CL') AND ol.M_Product_ID = "+h;n.length>0&&(i+=" AND o.M_Warehouse_ID IN ("+n+")");i+=" ORDER BY o.Created DESC";VIS.DB.executeDataSet(i.toString(),null,bc)}}function bc(n){var i=0,u=null,f=null,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,u=n.tables[0].rows[t].cells.datepromised==null?null:ai(n.tables[0].rows[t].cells.datepromised),f=n.tables[0].rows[t].cells.dateordered==null?null:ai(n.tables[0].rows[t].cells.dateordered),yu.push({recid:i,DatePromised:u,Quantity:parseFloat(n.tables[0].rows[t].cells.qtyordered).toLocaleString(),DateOrdered:f,Supplier:n.tables[0].rows[t].cells.supplier,QtyReserved:parseFloat(n.tables[0].rows[t].cells.qtyreserved).toLocaleString(),M_Product_ID:0});w2utils.encodeTags(yu);ci.add(yu);yu=[];r[0].style.visibility="hidden"}function kc(){ui=null;ui=ct.w2grid({name:"VA011_gridReplenished_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"RequisitionNo",caption:VIS.Msg.getMsg("VA011_RequisitionNo"),sortable:!1,size:"20%"},{field:"Date",caption:VIS.Msg.getMsg("VA011_Date"),sortable:!1,size:"20%"},{field:"QtyDemanded",caption:"<div><span>"+VIS.Msg.getMsg("VA011_QtyDemanded")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,style:"text-align: right",render:"number:2"},{field:"QtyReceived",caption:"<div><span>"+VIS.Msg.getMsg("VA011_QtyReceived")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,style:"text-align: right",render:"number:2"},{field:"QtyPending",caption:"<div><span>"+VIS.Msg.getMsg("VA011_QtyPending")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,style:"text-align: right",render:"number:2"},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&ui.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});ui.hideColumn("attribute_ID");ui.hideColumn("M_Product_ID")}function ve(){var i,f,o,n,e,t;if(!y){if(r[0].style.visibility="visible",gt=[],i=0,ui.clear(),i=i+1,u.length>0)for(f=0;f<u.length;f++){if(o="SELECT r.DocumentNo, r.datedoc, rl.Qty, rl.M_Product_ID, rl.DTD001_DeliveredQty, CASE WHEN (rl.Qty - rl.DTD001_DeliveredQty) > 0 THEN (rl.Qty - rl.DTD001_DeliveredQty) ELSE 0 END AS QtyPending  FROM m_requisitionline rl INNER JOIN M_Requisition r ON (r.M_Requisition_ID = rl.M_Requisition_ID) INNER JOIN m_product p ON (p.M_Product_ID = rl.M_Product_ID) WHERE rl.M_Product_ID = "+h+" AND r.M_Warehouse_ID = "+u[f],n=VIS.DB.executeDataSet(o.toString(),null,null),n!=null&&n.tables[0].rows.length>0)for(e=null,t=0;t<n.tables[0].rows.length;t++)i=i+1,e=n.tables[0].rows[t].cells.datedoc==null?null:ai(n.tables[0].rows[t].cells.datedoc),gt.push({recid:i,RequisitionNo:n.tables[0].rows[t].cells.documentno,Date:e,QtyDemanded:parseFloat(n.tables[0].rows[t].cells.qty).toLocaleString(),QtyReceived:parseFloat(n.tables[0].rows[t].cells.dtd001_deliveredqty).toLocaleString(),QtyPending:parseFloat(n.tables[0].rows[t].cells.qtypending).toLocaleString(),M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(gt)}else for(f=0;f<u.length;f++){if(o="SELECT r.DocumentNo, r.datedoc, rl.Qty, rl.M_Product_ID, rl.DTD001_DeliveredQty, CASE WHEN (rl.Qty - rl.DTD001_DeliveredQty) > 0 THEN (rl.Qty - rl.DTD001_DeliveredQty) ELSE 0 END AS QtyPending  FROM m_requisitionline rl INNER JOIN M_Requisition r ON (r.M_Requisition_ID = rl.M_Requisition_ID) INNER JOIN m_product p ON (p.M_Product_ID = rl.M_Product_ID) WHERE rl.M_Product_ID = "+h,n=VIS.DB.executeDataSet(o.toString(),null,null),n!=null&&n.tables[0].rows.length>0)for(e=null,t=0;t<n.tables[0].rows.length;t++)i=i+1,e=n.tables[0].rows[t].cells.datedoc==null?null:ai(n.tables[0].rows[t].cells.datedoc),gt.push({recid:i,RequisitionNo:n.tables[0].rows[t].cells.documentno,Date:e,QtyDemanded:n.tables[0].rows[t].cells.qty,QtyReceived:n.tables[0].rows[t].cells.dtd001_deliveredqty,QtyPending:n.tables[0].rows[t].cells.qtypending,M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(gt)}ui.add(gt);gt=[];r[0].style.visibility="hidden"}}function dc(){fi=null;fi=lt.w2grid({name:"VA011_gridDemand_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"DocumentType",caption:VIS.Msg.getMsg("VA011_DocumentType"),sortable:!1,size:"16%"},{field:"DocumentNo",caption:VIS.Msg.getMsg("VA011_DocumentNo"),sortable:!1,size:"16%"},{field:"Quantity",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Quantity")+"<\/span><\/div>",sortable:!1,size:"16%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Quantity;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"DatePromised",caption:VIS.Msg.getMsg("VA011_DatePromised"),sortable:!1,size:"16%"},{field:"DemandedBy",caption:VIS.Msg.getMsg("VA011_DemandedBy"),sortable:!1,size:"18%"},{field:"AvailabilityStatus",caption:VIS.Msg.getMsg("VA011_AvailabilityStatus"),sortable:!1,size:"18%",display:!1},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&fi.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});fi.hideColumn("attribute_ID");fi.hideColumn("AvailabilityStatus");fi.hideColumn("M_Product_ID")}function ye(){var e,n,t,f,i,o,s;if(!y){if(r[0].style.visibility="visible",pu=[],e=0,fi.clear(),e=e+1,n="SELECT * FROM ( SELECT o.Created, o.documentno, ol.QtyReserved AS qtyentered, dt.name as DocType, o.datepromised, bp.name as demandedby FROM C_Order o INNER JOIN c_orderline ol ON (ol.C_Order_ID = o.C_Order_ID)  INNER JOIN C_DocType dt ON (o.C_DocTypeTarget_ID = dt.C_DocType_ID) INNER JOIN C_BPartner bp ON (bp.C_BPartner_ID = o.C_BPartner_ID) WHERE o.IsSOTrx = 'Y' AND o.IsReturnTrx = 'N' AND o.DocStatus IN ('CO', 'CL') AND ol.QtyReserved >0 AND ol.M_Product_ID = "+h,t="",l.length>0){for(i=0;i<l.length;i++)t.length>0?t=t+", "+l[i]:(t+="0, ",t+=l[i]);n+=" AND o.AD_Org_ID IN (0, "+t+")"}if(f="",u.length>0){for(i=0;i<u.length;i++)f=f.length>0?f+", "+u[i]:f+u[i];n+=" AND o.M_Warehouse_ID IN ("+f+")"}n+=" UNION SELECT r.Created, r.DocumentNo, rl.DTD001_ReservedQty as qtyentered, dt.name AS DocType, r.daterequired as datepromised, w.name AS demandedby  FROM m_requisitionline rl  INNER JOIN M_Requisition r ON (r.M_Requisition_ID = rl.M_Requisition_ID) INNER JOIN C_DocType dt ON (r.C_DocType_ID = dt.C_DocType_ID) INNER JOIN M_Warehouse w  ON (r.M_Warehouse_ID = w.M_Warehouse_ID) INNER JOIN m_product p ON (p.M_Product_ID = rl.M_Product_ID) WHERE r.DocStatus IN ('CO', 'CL') AND rl.DTD001_ReservedQty > 0 AND r.IsActive = 'Y' AND rl.M_Product_ID = "+h;t.length>0&&(n+=" AND r.AD_Org_ID IN (0, "+t+")");f.length>0&&(n+=" AND r.M_Warehouse_ID IN (0, "+f+")");o="SELECT COUNT(*) FROM AD_ModuleInfo WHERE Prefix = 'VAMFG_' AND IsActive = 'Y'";s=VIS.DB.executeScalar(o.toString(),null,null);s>0&&(n+=" UNION SELECT wo.Created, wo.documentno, wo.vamfg_qtyentered AS qtyentered, dt.Name AS doctype, wo.VAMFG_DateScheduleTo as datepromised, bp.name as demandedby FROM vamfg_M_workorder wo  INNER JOIN c_doctype dt ON (dt.C_DocType_ID = wo.C_DocType_ID) LEFT OUTER JOIN C_BPartner bp ON (bp.C_BPartner_ID = wo.C_BPartner_ID) INNER JOIN m_product p  ON (p.M_Product_ID = wo.M_Product_ID) WHERE wo.DocStatus IN ('CO', 'CL') AND wo.IsActive   = 'Y' AND wo.M_Product_ID = "+h,t.length>0&&(n+=" AND wo.AD_Org_ID IN (0, "+t+")"),f.length>0&&(n+=" AND wo.M_Warehouse_ID IN (0, "+f+")"));n+=") ORDER BY Created DESC";VIS.DB.executeDataSet(n.toString(),null,gc)}}function gc(n){var i=0,u,t;if(n!=null&&n.tables[0].rows.length>0)for(u=null,t=0;t<n.tables[0].rows.length;t++)i=i+1,u=n.tables[0].rows[t].cells.datepromised==null?null:ai(n.tables[0].rows[t].cells.datepromised),pu.push({recid:i,DocumentType:n.tables[0].rows[t].cells.doctype,DocumentNo:n.tables[0].rows[t].cells.documentno,Quantity:parseFloat(n.tables[0].rows[t].cells.qtyentered).toLocaleString(),DatePromised:u,DemandedBy:n.tables[0].rows[t].cells.demandedby,AvailabilityStatus:"",M_Product_ID:0});w2utils.encodeTags(pu);fi.add(pu);pu=[];r[0].style.visibility="hidden"}function nl(){li=null;li=at.w2grid({name:"VA011_gridTransactions_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"DocumentType",caption:VIS.Msg.getMsg("VA011_DocumentType"),sortable:!1,size:"12%"},{field:"DocumentNo",caption:VIS.Msg.getMsg("VA011_DocumentNo"),sortable:!1,size:"12%"},{field:"Locator",caption:VIS.Msg.getMsg("VA011_Locator"),sortable:!1,size:"12%"},{field:"Date",caption:VIS.Msg.getMsg("VA011_Date"),sortable:!1,size:"12%"},{field:"InventoryIn",caption:"<div><span>"+VIS.Msg.getMsg("VA011_InventoryIn")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.InventoryIn;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"InventoryOut",caption:"<div><span>"+VIS.Msg.getMsg("VA011_InventoryOut")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.InventoryOut;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Attribute",caption:VIS.Msg.getMsg("VA011_Attribute"),sortable:!1,size:"20%"},{field:"Balance",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Balance")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Balance;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(){},onClick:function(n){n.column==5&&li.records.length>0},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});li.hideColumn("attribute_ID");li.hideColumn("M_Product_ID")}function pe(){var f,i,n,t;if(!y){if(r[0].style.visibility="visible",wu=[],f=0,li.clear(),f=f+1,i="SELECT t.M_Product_ID, t.M_AttributeSetInstance_ID, asi.description, t.MOVEMENTQTY , t.MOVEMENTTYPE, t.CurrentQty, t.MovementDate, lc.Value AS Locator, t.M_Transaction_ID, iol.M_InOutLine_ID, ivl.M_InventoryLine_ID, mvl.M_MovementLine_ID,  Case when t.MovementQty > 0 Then t.movementQty else 0 end as InventoryIn, Case when t.MovementQty < 0 Then t.movementQty else 0 end as InventoryOut,  CASE WHEN NVL(iol.M_InOutLine_ID,0) > 0 THEN iol.M_InoutLine_ID WHEN NVL(ivl.M_InventoryLine_ID,0) > 0 THEN ivl.M_InventoryLine_ID WHEN NVL(mvl.M_MovementLine_ID,0) > 0 THEN mvl.M_MovementLine_ID END AS ID,  CASE WHEN NVL(iol.M_InOutLine_ID,0) > 0 THEN io.DocumentNo WHEN NVL(ivl.M_InventoryLine_ID,0) > 0 THEN iv.DocumentNo WHEN NVL(mvl.M_MovementLine_ID,0) > 0 THEN mv.DocumentNo END AS DocumentNo, CASE WHEN NVL(iol.M_InOutLine_ID,0) > 0 THEN dtio.Name WHEN NVL(ivl.M_InventoryLine_ID,0) > 0 THEN dtiv.Name WHEN NVL(mvl.M_MovementLine_ID,0) > 0 THEN dtmv.Name END AS DocType  FROM M_Transaction t LEFT OUTER JOIN M_InoutLine iol ON (iol.M_InOutLine_ID = t.M_InOutLine_ID) LEFT OUTER JOIN M_Inout io ON (iol.M_InOut_ID = io.M_InOut_ID) LEFT OUTER JOIN C_DocType dtio  ON (dtio.C_DocType_ID = io.C_DocType_ID) LEFT OUTER JOIN M_inventoryLine ivl ON (ivl.M_inventoryLine_ID = t.M_inventoryLine_ID) LEFT OUTER JOIN M_Inventory iv ON (ivl.M_Inventory_ID = iv.M_Inventory_ID)  LEFT OUTER JOIN C_DocType dtiv ON (dtiv.C_DocType_ID = iv.C_DocType_ID) LEFT OUTER JOIN M_MovementLine mvl ON (mvl.M_MovementLine_ID = t.M_MovementLine_ID) LEFT OUTER JOIN M_Movement mv  ON (mvl.M_Movement_ID = mv.M_Movement_ID) LEFT OUTER JOIN C_DocType dtmv ON (dtmv.C_DocType_ID = mv.C_DocType_ID) LEFT OUTER JOIN M_AttributeSetInstance asi  ON (t.M_AttributeSetInstance_ID = asi.M_AttributeSetInstance_ID) LEFT OUTER JOIN M_Locator lc ON (lc.M_Locator_ID = t.M_Locator_ID) WHERE t.M_Product_ID = "+h,u.length>0){for(n="",t=0;t<u.length;t++)n=n.length>0?n+", "+u[t]:n+u[t];i+=" AND t.M_Locator_ID IN (Select loc.M_Locator_ID from m_warehouse wh inner join m_locator loc on (loc.m_warehouse_ID = wh.M_Warehouse_ID) where wh.m_warehouse_ID in ("+n+")) "}i+=" ORDER BY t.MovementDate DESC";VIS.DB.executeDataSet(i.toString(),null,tl)}}function tl(n){var i=0,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++){i=i+1;var u=0,f=0,e=null;n.tables[0].rows[t].cells.inventoryin>0&&(u=parseFloat(n.tables[0].rows[t].cells.inventoryin).toLocaleString());n.tables[0].rows[t].cells.inventoryout<0&&(f=parseFloat(n.tables[0].rows[t].cells.inventoryout).toLocaleString());n.tables[0].rows[t].cells.movementdate==null||(e=ai(n.tables[0].rows[t].cells.movementdate));wu.push({recid:i,DocumentType:n.tables[0].rows[t].cells.doctype,DocumentNo:n.tables[0].rows[t].cells.documentno,Locator:n.tables[0].rows[t].cells.locator,Date:e,InventoryIn:u,InventoryOut:f,Attribute:n.tables[0].rows[t].cells.description,Balance:parseFloat(n.tables[0].rows[t].cells.currentqty).toLocaleString(),M_Product_ID:0})}w2utils.encodeTags(wu);li.add(wu);wu=[];r[0].style.visibility="hidden"}function il(){e=null;e=bo.w2grid({name:"VA011_gridReplenishmentPop_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Product",caption:VIS.Msg.getMsg("VA011_Product"),sortable:!1,size:"20%"},{field:"Type",caption:"<div><span>"+VIS.Msg.getMsg("VA011_Type")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,editable:{type:"select",items:ni,showAll:!0},render:function(n,t,i){var u="",r;for(r in ni)ni[r].id==this.getCellValue(t,i)&&(u=ni[r].text);return u}},{field:"Min",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Min")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.Min;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Max",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Max")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.Max;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Qty",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_MinOrderQuantity")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.Qty;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"OrderPack",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_OrderPack")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.OrderPack;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"SourceWarehouse",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_SourceWarehouse")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,editable:{type:"select",items:ii,showAll:!0},render:function(n,t,i){var u="",r;for(r in ii)ii[r].id==this.getCellValue(t,i)&&(u=ii[r].text);return u}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(t){var i;t.column==0&&(w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].Product=t.value_new);t.column==1&&(w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].Type=t.value_new);t.column==2?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].Min=i.toFixed(f)):t.column==3?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].Max=i.toFixed(f)):t.column==4?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].Qty=i.toFixed(f)):t.column==5?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].OrderPack=i.toFixed(f)):t.column==6&&(w2ui["VA011_gridReplenishmentPop_"+n.windowNo].records[t.index].SourceWarehouse=t.value_new)},onClick:function(n){var t;if(n.column==8&&e.records.length>0&&e.records[n.recid-1]!=null){r[0].style.visibility="visible";var s=it.val(),h=e.records[n.recid-1].M_Product_ID,c=e.records[n.recid-1].Type,i=e.records[n.recid-1].Min,u=e.records[n.recid-1].Max,f=e.records[n.recid-1].Qty,o=e.records[n.recid-1].SourceWarehouse;if(h==null||h==""){VIS.ADialog.error("VA011_ProductMandatory");r[0].style.visibility="hidden";return}if(s==null||s==""){VIS.ADialog.error("VA011_WarehouseMandatory");r[0].style.visibility="hidden";return}if(c==null||c==""){VIS.ADialog.error("VA011_ReplenishTypeMandatory");r[0].style.visibility="hidden";return}(o==null||o=="")&&(o=0);(f==null||f=="")&&(f=0);(i==null||i=="")&&(i=0);(u==null||u=="")&&(u=0);t=e.records[n.recid-1].OrderPack;(t==null||t=="")&&(t=0);VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/SaveReplenishment",{M_Product_ID:h,M_Warehouse_ID:s,Type:c,Min:i,Max:u,Qty:f,OrderPack:t,SourceWarehouse:o},th)}},onDelete:function(n){n.preventDefault()},onSubmit:function(){},onEditField:function(i){var r,u;i.column==6&&e.records.length>0&&(ii=ue.slice(),e.columns[i.column].editable.items=ue.slice(),r=e.columns[i.column].editable.items.map(function(n){return n.id==it.val()}).indexOf(!0),r>-1&&e.columns[i.column].editable.items.splice(r,1));id=i.recid;(i.column==2||i.column==3||i.column==4||i.column==5)&&(e.records[i.index][e.columns[i.column].field]=ei(i,e.records[i.index][e.columns[i.column].field]),u=et.GetFormatAmount(e.records[i.index][e.columns[i.column].field],"init",d),e.records[i.index][e.columns[i.column].field]=et.GetConvertedString(u,d),t("#grid_VA011_gridReplenishmentPop_"+n.windowNo+"_rec_"+id).keydown(function(n){if(d||n.keyCode!=190&&n.keyCode!=110){if(d&&n.keyCode==188)return!1}else return!1;return n.target.value.contains(".")&&(n.which==110||n.which==190||n.which==188)&&n.target.value.indexOf(".")>-1&&(n.target.value=n.target.value.replace(".","")),n.target.value.contains(",")&&(n.which==110||n.which==190||n.which==188)&&n.target.value.indexOf(",")>-1&&(n.target.value=n.target.value.replace(",","")),n.keyCode!=8&&n.keyCode!=9&&(n.keyCode<37||n.keyCode>40)&&(n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.keyCode!=109&&n.keyCode!=189&&n.keyCode!=110&&n.keyCode!=144&&n.keyCode!=188&&n.keyCode!=190?!1:void 0}))}});e.hideColumn("M_Warehouse_ID");e.hideColumn("M_Product_ID")}function th(){i.selectNone();tv()}function ei(n,t){var u=!1,r,i;if(n.value_new=VIS.Utility.Util.getValueOfString(t),n.value_new.contains(".")){for(u=!0,r=[],i=0;i<n.value_new.length;i++)n.value_new[i]==="."&&r.push(i);r.length>1&&(n.value_new=ns(n.value_new,"."))}if(n.value_new.contains(","))if(u)n.value_new=ns(n.value_new,",");else{for(r=[],i=0;i<n.value_new.length;i++)n.value_new[i]===","&&r.push(i);n.value_new=r.length>1?ns(n.value_new,","):n.value_new.replace(",",".")}return n.value_new==""&&(n.value_new="0"),n.value_new}function ns(n,t){var i=n.split(t);return n=i.slice(0,-1).join("")+"."+i.slice(-1),n.indexOf(".")==n.length-1&&(n=n.replace(".","")),n}function ih(){var n,t;y||(r[0].style.visibility="visible",yt=[],n=0,e!=null&&e.clear(),n=n+1,t="SELECT COUNT(*) FROM AD_ModuleInfo WHERE Prefix = 'DTD001_'",VIS.DB.executeScalar(t.toString(),null,rl))}function rl(n){var u,t,f,r;if(u="",u=n>0?"SELECT p.Name AS Product, w.Name      AS Warehouse, w.M_Warehouse_ID, NVL(rep.Level_Max,0) AS Maxi, NVL(rep.Level_Min,0)            AS Mini,  NVL(rep.ReplenishType,0)        AS rtype,  NVL(DTD001_MinOrderQty,0)       AS Qty,  NVL(DTD001_OrderPackQty,0)      AS OrderPack,  rep.M_WarehouseSource_ID AS SourceWarehouse,  p.M_Product_ID FROM M_Product p  Left Outer Join M_Replenish rep ON (p.M_Product_ID = rep.M_Product_ID) Left JOIN M_Warehouse w ON (w.M_Warehouse_ID = rep.M_Warehouse_ID) LEFT JOIN M_Warehouse w1  ON (w1.M_Warehouse_ID   = rep.M_WarehouseSource_ID) WHERE w.M_Warehouse_ID = "+it.val()+" AND p.IsActive      = 'Y' AND p.AD_Client_ID        = "+VIS.context.getContext("#AD_Client_ID"):"SELECT p.Name as Product, w.Name AS Warehouse, w.M_Warehouse_ID, NVL(rep.Level_Max,0) AS Maxi, NVL(rep.Level_Min,0) AS Mini, rep.ReplenishType AS rtype, 0 AS Qty, 0 AS OrderPack, rep.M_WarehouseSource_ID AS SourceWarehouse, p.M_Product_ID FROM M_Product p LEFT JOIN M_Replenish rep ON (p.M_Product_ID = rep.M_Product_ID) LEFT JOIN M_Warehouse w  ON (w.M_Warehouse_ID = rep.M_Warehouse_ID) LEFT JOIN M_Warehouse w1 ON (w1.M_Warehouse_ID = rep.M_WarehouseSource_ID) WHERE w.M_Warehouse_ID = "+it.val()+" AND p.IsActive = 'Y' AND p.AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID"),t=" AND p.M_Product_ID IN (",f=!1,i.getSelection().length>0){for(r=0;r<i.records.length;r++)i.getSelection().map(function(n){return n==i.records[r].recid}).indexOf(!0)>=0&&(f=!0,t+=i.records[r].M_Product_ID+",");t=t.substring(0,t.length-1)+")"}f&&(u+=t);VIS.DB.executeDataSet(u.toString(),null,ul)}function ul(n){var i=0,t;if(eh=[],yt=[],n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,yt.push({recid:i,Product:n.tables[0].rows[t].cells.product,Warehouse:n.tables[0].rows[t].cells.m_warehouse_id,Type:n.tables[0].rows[t].cells.rtype,Min:n.tables[0].rows[t].cells.mini,Max:n.tables[0].rows[t].cells.maxi,Qty:n.tables[0].rows[t].cells.qty.toLocaleString(),OrderPack:n.tables[0].rows[t].cells.orderpack,SourceWarehouse:n.tables[0].rows[t].cells.sourcewarehouse,M_Product_ID:n.tables[0].rows[t].cells.m_product_id});fl()}function fl(){for(var t=yt.length,n=0;n<i.getSelection().length;n++)yt.map(function(t){return t.M_Product_ID==i.records[i.getSelection()[n]-1].M_Product_ID}).indexOf(!0)>=0||(t=t+1,yt.push({recid:t,Product:i.records[i.getSelection()[n]-1].Product,Warehouse:"",Type:"1",Min:0,Max:0,Qty:0,OrderPack:0,SourceWarehouse:"",M_Product_ID:i.records[i.getSelection()[n]-1].M_Product_ID}));w2utils.encodeTags(yt);e.add(yt);r[0].style.visibility="hidden"}function el(){s=null;s=vt.w2grid({name:"VA011_gridReplenishmentB_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!1,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Warehouse",caption:VIS.Msg.getMsg("VA011_Warehouse"),sortable:!1,size:"20%"},{field:"Type",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Type")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,editable:{type:"select",items:ni,showAll:!0},render:function(n,t,i){var u="",r;for(r in ni)ni[r].id==this.getCellValue(t,i)&&(u=ni[r].text);return u}},{field:"Min",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Min")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.Min;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Max",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Max")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.Max;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Qty",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_MinOrderQuantity")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.Qty;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"OrderPack",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_OrderPack")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,style:"text-align: right",editable:{type:"number"},render:function(n){var t=n.OrderPack;return t=ei(event,t),parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"SourceWarehouse",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_SourceWarehouse")+"<\/span><\/div>",sortable:!1,size:"20%",hidden:!1,editable:{type:"select",items:ii,showAll:!0},render:function(n,t,i){var u="",r;for(r in ii)ii[r].id==this.getCellValue(t,i)&&(u=ii[r].text);return u}},{field:"Save",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Save")+"<\/span><\/div>",sortable:!1,size:"8%",hidden:!1,render:function(){return'<div style="text-align: center;"><i class="vis vis-save" title="Attribute Set Instance" style="opacity:1;font-size: 1rem;"><\/i><\/div>'}},{field:"M_Warehouse_ID",caption:"M_Warehouse_ID",sortable:!1,size:"80px",display:!1},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1}],records:[],onChange:function(t){var i;t.column==1&&(w2ui["VA011_gridReplenishmentB_"+n.windowNo].records[t.index].Type=t.value_new);t.column==2?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentB_"+n.windowNo].records[t.index].Min=i.toFixed(f)):t.column==3?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentB_"+n.windowNo].records[t.index].Max=i.toFixed(f)):t.column==4?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentB_"+n.windowNo].records[t.index].Qty=i.toFixed(f)):t.column==5?(i=et.GetConvertedNumber(t.value_new,d),w2ui["VA011_gridReplenishmentB_"+n.windowNo].records[t.index].OrderPack=i.toFixed(f)):t.column==6&&(w2ui["VA011_gridReplenishmentB_"+n.windowNo].records[t.index].SourceWarehouse=t.value_new)},onClick:function(n){var t;if(n.column==7&&s.records.length>0&&s.records[n.recid-1]!=null){r[0].style.visibility="visible";var f=s.records[n.recid-1].M_Warehouse_ID,e=s.records[n.recid-1].M_Product_ID,o=s.records[n.recid-1].Type,h=s.records[n.recid-1].Min,c=s.records[n.recid-1].Max,i=s.records[n.recid-1].Qty,u=s.records[n.recid-1].SourceWarehouse;i==null&&(i=0);t=s.records[n.recid-1].OrderPack;t==null&&(t=0);u==null&&(u=0);VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/SaveReplenishment",{M_Product_ID:e,M_Warehouse_ID:f,Type:o,Min:h,Max:c,Qty:i,OrderPack:t,SourceWarehouse:u},hl)}},onDelete:function(n){n.preventDefault()},onEditField:function(i){var r,u;i.column==6&&s.records.length>0&&(r=s.columns[i.column].editable.items.map(function(n){return n.id==s.records[i.recid-1].M_Warehouse_ID}).indexOf(!0),r>-1&&s.columns[i.column].editable.items.splice(r,1));id=i.recid;(i.column==2||i.column==3||i.column==4||i.column==5)&&(s.records[i.index][s.columns[i.column].field]=ei(i,s.records[i.index][s.columns[i.column].field]),u=et.GetFormatAmount(s.records[i.index][s.columns[i.column].field],"init",d),s.records[i.index][s.columns[i.column].field]=et.GetConvertedString(u,d),t("#grid_VA011_gridReplenishmentB_"+n.windowNo+"_rec_"+id).keydown(function(n){if(d||n.keyCode!=190&&n.keyCode!=110){if(d&&n.keyCode==188)return!1}else return!1;return n.target.value.contains(".")&&(n.which==110||n.which==190||n.which==188)&&n.target.value.indexOf(".")>-1&&(n.target.value=n.target.value.replace(".","")),n.target.value.contains(",")&&(n.which==110||n.which==190||n.which==188)&&n.target.value.indexOf(",")>-1&&(n.target.value=n.target.value.replace(",","")),n.keyCode!=8&&n.keyCode!=9&&(n.keyCode<37||n.keyCode>40)&&(n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.keyCode!=109&&n.keyCode!=189&&n.keyCode!=110&&n.keyCode!=144&&n.keyCode!=188&&n.keyCode!=190?!1:void 0}))}});s.hideColumn("M_Warehouse_ID");s.hideColumn("M_Product_ID")}function we(){var n,t;y||(r[0].style.visibility="visible",bu=[],n=0,s!=null&&s.clear(),n=n+1,t="SELECT COUNT(*) FROM AD_ModuleInfo WHERE Prefix = 'DTD001_'",VIS.DB.executeScalar(t.toString(),null,ol))}function ol(n){var r="",t,i;if(r=n>0?"SELECT w.Name AS Warehouse, w.M_Warehouse_ID, rep.Level_Max AS Maxi, rep.Level_Min AS Mini, rep.ReplenishType AS rtype, DTD001_MinOrderQty AS Qty, DTD001_OrderPackQty AS OrderPack, rep.M_WarehouseSource_ID AS SourceWarehouse, p.M_Product_ID FROM M_Replenish rep INNER JOIN M_Product p ON (p.M_Product_ID = rep.M_Product_ID) INNER JOIN M_Warehouse w  ON (w.M_Warehouse_ID = rep.M_Warehouse_ID) LEFT JOIN M_Warehouse w1 ON (w1.M_Warehouse_ID = rep.M_WarehouseSource_ID) WHERE rep.IsActive = 'Y' AND p.M_Product_ID    = "+h:"SELECT w.Name AS Warehouse, w.M_Warehouse_ID, rep.Level_Max AS Maxi, rep.Level_Min AS Mini, rep.ReplenishType AS rtype, 0 AS Qty, 0 AS OrderPack, rep.M_WarehouseSource_ID AS SourceWarehouse, p.M_Product_ID FROM M_Replenish rep INNER JOIN M_Product p ON (p.M_Product_ID = rep.M_Product_ID) INNER JOIN M_Warehouse w  ON (w.M_Warehouse_ID = rep.M_Warehouse_ID) LEFT JOIN M_Warehouse w1 ON (w1.M_Warehouse_ID = rep.M_WarehouseSource_ID) WHERE rep.IsActive = 'Y' AND p.M_Product_ID    = "+h,u.length>0){for(t="",i=0;i<u.length;i++)t=t.length>0?t+", "+u[i]:t+u[i];r+=" AND w.M_Warehouse_ID IN ("+t+")"}VIS.DB.executeDataSet(r.toString(),null,sl)}function sl(n){var i=0,t;if(n!=null&&n.tables[0].rows.length>0)for(t=0;t<n.tables[0].rows.length;t++)i=i+1,bu.push({recid:i,Warehouse:n.tables[0].rows[t].cells.warehouse,Type:n.tables[0].rows[t].cells.rtype,Min:n.tables[0].rows[t].cells.mini,Max:n.tables[0].rows[t].cells.maxi,Qty:n.tables[0].rows[t].cells.qty,OrderPack:n.tables[0].rows[t].cells.orderpack,SourceWarehouse:n.tables[0].rows[t].cells.sourcewarehouse,M_Warehouse_ID:n.tables[0].rows[t].cells.m_warehouse_id,M_Product_ID:n.tables[0].rows[t].cells.m_product_id});w2utils.encodeTags(bu);s.add(bu);bu=[];r[0].style.visibility="hidden"}function hl(){we()}function cl(){o=null;o=yi.w2grid({name:"VA011_gridRepTop_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!0,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1},{field:"AD_Client_ID",caption:"AD_Client_ID",sortable:!1,size:"80px",display:!1},{field:"AD_Org_ID",caption:"AD_Org_ID",sortable:!1,size:"80px",display:!1},{field:"RepCreate",caption:"RepCreate",sortable:!1,size:"80px",display:!1},{field:"C_DocType_ID",caption:"C_DocType_ID",sortable:!1,size:"80px",display:!1},{field:"M_PriceList_ID",caption:"M_PriceList_ID",sortable:!1,size:"80px",display:!1},{field:"M_WarehouseSource_ID",caption:"M_WarehouseSource_ID",sortable:!1,size:"80px",display:!1},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1},{field:"C_BPartner_ID",caption:"C_BPartner_ID",sortable:!1,size:"80px",display:!1},{field:"M_Warehouse_ID",caption:"M_Warehouse_ID",sortable:!1,size:"80px",display:!1},{field:"DocStatus",caption:"DocStatus",sortable:!1,size:"35%",hidden:!1,display:!1},{field:"Product",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("Product")+"<\/span><\/div>",sortable:!1,size:"12%",hidden:!1},{field:"Warehouse",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Warehouse")+"<\/span><\/div>",sortable:!1,size:"12%",hidden:!1},{field:"SourceWarehouse",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_SourceWarehouse")+"<\/span><\/div>",sortable:!1,size:"12%",hidden:!1},{field:"ReplenishmentType",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_ReplenishmentType")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1},{field:"Max",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Max")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Max;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Min",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Min")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Min;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"QtyOnHand",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOnHand;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Ordered",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Ordered")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Ordered;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"ReqReserved",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_ReqReserved")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.ReqReserved;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Reserved",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Reserved")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.Reserved;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"QtyToOrder",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_QtyToOrder")+"<\/span><\/div>",sortable:!1,size:"9%",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyToOrder;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},],records:[],onChange:function(){},onSelect:function(n){o.records[n.recid-1]!=null},onUnselect:function(n){n.onComplete=function(){o.getSelection().length==1}},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});o.hideColumn("M_Product_ID");o.hideColumn("AD_Client_ID");o.hideColumn("AD_Org_ID");o.hideColumn("RepCreate");o.hideColumn("C_DocType_ID");o.hideColumn("M_PriceList_ID");o.hideColumn("M_WarehouseSource_ID");o.hideColumn("C_BPartner_ID");o.hideColumn("M_Warehouse_ID");o.hideColumn("DocStatus");o.hideColumn("ReplenishmentType")}function ll(){y||(h=0,r[0].style.visibility="visible")}function al(){i=null;i=vi.w2grid({name:"VA011_gridProd_"+n.windowNo,recordHeight:25,show:{toolbar:!1,selectColumn:!0,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1},{field:"SearchKey",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("SearchKey")+"<\/span><\/div>",sortable:!1,size:"80px",hidden:!1},{field:"Product",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("Product")+"<\/span><\/div>",sortable:!1,size:"80px",hidden:!1},{field:"UPC",caption:'<div style="text-align: center;" ><span>UPC/EAN<\/span><\/div>',sortable:!1,size:"80px",hidden:!1},{field:"QtyOnHand",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_OnHandQty")+"<\/span><\/div>",sortable:!1,size:"80px",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyOnHand;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"UOM",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_UOM")+"<\/span><\/div>",sortable:!1,size:"50px",hidden:!1},{field:"Reserved",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Reserved")+"<\/span><\/div>",sortable:!1,size:"70px",hidden:!1,style:"text-align: right",render:function(n){var t=n.Reserved;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"QtyAvailable",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_ATP")+"<\/span><\/div>",sortable:!1,size:"45px",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyAvailable;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"UnConfirmed",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Unconfirmed")+"<\/span><\/div>",sortable:!1,size:"82px",hidden:!1,style:"text-align: right",render:function(n){var t=n.UnConfirmed;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Ordered",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Ordered")+"<\/span><\/div>",sortable:!1,size:"70px",hidden:!1,style:"text-align: right",render:function(n){var t=n.Ordered;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Demanded",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Demanded")+"<\/span><\/div>",sortable:!1,size:"75px",hidden:!1,style:"text-align: right",render:function(n){var t=n.Demanded;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"TillReorder",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_TillReorder")+"<\/span><\/div>",sortable:!1,size:"80px",hidden:!1,render:"number:2"},{field:"QtyToReplenish",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_QtyToReplenish")+"<\/span><\/div>",sortable:!1,size:"110px",hidden:!1,style:"text-align: right",render:function(n){var t=n.QtyToReplenish;return parseFloat(t).toLocaleString(undefined,{minimumFractionDigits:f})}},{field:"Status",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getMsg("VA011_Status")+"<\/span><\/div>",sortable:!1,size:"80px",hidden:!1,render:function(){return'<div style="text-align: center;"><img src="" alt="" title="Attribute Set Instance" style="opacity:1;"><\/div>'}},{field:"C_UOM_ID",caption:"C_UOM_ID",sortable:!1,size:"80px",display:!1},{field:"MinLevel",caption:"MinLevel",sortable:!1,size:"13%",hidden:!1,render:"number:2"},],records:[],onChange:function(){},onSelect:function(n){n.onComplete=function(){if(i.getSelection().length>1){ti=!0;no();return}ti=!1;no();i.records[n.recid-1]!=null?(h=VIS.Utility.Util.getValueOfInt(i.records[n.recid-1].M_Product_ID),uf.push(h),sf()):(h=0,uf=uf.splice(),sf())}},onUnselect:function(r){r.onComplete=function(){var r,u;i.getSelection().length==1?(ti=!1,no(),h=VIS.Utility.Util.getValueOfInt(i.records[i.getSelection()-1].M_Product_ID),sf()):(h=0,uf=uf.splice(),tu.css("display","none"),t("#VA011_prodName_"+n.windowNo).text(""),t("#VA011_inputWeight_"+n.windowNo).val(""),t("#VA011_inputVolume_"+n.windowNo).val(""),t("#VA011_inputTare_"+n.windowNo).val(""),t("#VA011_inputLocator_"+n.windowNo).val(""),t("#VA011_inputExpDays_"+n.windowNo).val(""),t("#VA011_inputUOM_"+n.windowNo).val(""),t("#VA011_UPC"+n.windowNo).find("span").remove(),t("#VA011_UPC"+n.windowNo).append("<span><\/span>"),t("#VA011_AttributeSet"+n.windowNo).find("span").remove(),t("#VA011_AttributeSet"+n.windowNo).append("<span><\/span>"),r="",r!=null?r!=""?(r=r.substring(r.lastIndexOf("/")+1,r.length),u=new Date,p.removeAttr("src"),p.attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+r+"?"+u.getTime())):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"))}},onDelete:function(n){n.preventDefault()},onSubmit:function(){}});i.hideColumn("M_Product_ID");i.hideColumn("C_UOM_ID");i.hideColumn("MinLevel");i.hideColumn("TillReorder")}function sf(){r[0].style.visibility="visible";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetProductDetails",{M_Product_ID:h},vl)}function vl(i){var r,u;c.find(".VA011-selectedTab")[0].id.indexOf("VA011_RightSection")>=0?(t("#VA011_RightSection"+n.windowNo).css("display","block"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#VA011_btnDetails_"+n.windowNo).addClass("VA011-selectedTab")):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnDetails")>=0?(t("#VA011_RightSection"+n.windowNo).css("display","block"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#VA011_btnDetails_"+n.windowNo).addClass("VA011-selectedTab")):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnSubsti")>=0?(t("#VA011_grdSubstitute_"+n.windowNo).css("display","block"),oe()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnRelated")>=0?(t("#VA011_grdRelated_"+n.windowNo).css("display","block"),se()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnSuppliers")>=0?(t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","block"),he()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnKits")>=0?(t("#VA011_grdKits_"+n.windowNo).css("display","block"),ce()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnCart")>=0&&t("#VA011_divCart_"+n.windowNo).css("display","block");i.Table[0]!=null?(tu.css("display","flex"),t("#VA011_prodName_"+n.windowNo).text(i.Table[0].NAME),t("#VA011_inputWeight_"+n.windowNo).val(i.Table[0].WEIGHT),t("#VA011_inputVolume_"+n.windowNo).val(i.Table[0].VOLUME),t("#VA011_inputTare_"+n.windowNo).val(i.Table[0].TARE),t("#VA011_inputLocator_"+n.windowNo).val(i.Table[0].LOCATOR),t("#VA011_inputExpDays_"+n.windowNo).val(i.Table[0].GUARANTEEDAYS),t("#VA011_inputUOM_"+n.windowNo).val(i.Table[0].UOM),t("#VA011_UPC"+n.windowNo).find("span").remove(),t("#VA011_UPC"+n.windowNo).append("<span>"+i.Table[0].UPC+"<\/span>"),t("#VA011_AttributeSet"+n.windowNo).find("span").remove(),t("#VA011_AttributeSet"+n.windowNo).append("<span>"+i.Table[0].ATTRIBUTE+"<\/span>"),r=i.Table[0].IMAGEURL,r!=null?r!=""?(r=r.substring(r.lastIndexOf("/")+1,r.length),u=new Date,p.removeAttr("src"),p.attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+r+"?"+u.getTime())):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"),a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnVariant")>=0?ru():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnReplenished")>=0?ve():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnLocators")>=0?le():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnOrdered")>=0?ae():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnDemand")>=0?ye():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnTransactions")>=0?pe():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnReplenishmentB")>=0&&we()):(tu.css("display","none"),t("#VA011_prodName_"+n.windowNo).text(""),t("#VA011_inputWeight_"+n.windowNo).val(""),t("#VA011_inputVolume_"+n.windowNo).val(""),t("#VA011_inputTare_"+n.windowNo).val(""),t("#VA011_inputLocator_"+n.windowNo).val(""),t("#VA011_inputExpDays_"+n.windowNo).val(""),t("#VA011_inputUOM_"+n.windowNo).val(""),t("#VA011_UPC"+n.windowNo).find("span").remove(),t("#VA011_UPC"+n.windowNo).append("<span><\/span>"),t("#VA011_AttributeSet"+n.windowNo).find("span").remove(),t("#VA011_AttributeSet"+n.windowNo).append("<span><\/span>"),r="",r!=null?r!=""?(r=r.substring(r.lastIndexOf("/")+1,r.length),u=new Date,p.removeAttr("src"),p.attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+r+"?"+u.getTime())):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"),ru())}function w(i){var o,e,s,c,a,f;if(go=!1,i||(kt.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),kt.find("#VA011_StockDet_"+n.windowNo).addClass("VA011-selectedTab")),!y){for(h=0,er.css("display","block"),r[0].style.visibility="visible",o="",f=0;f<u.length;f++)o=o.length>0?o+", "+u[f]:o+u[f];for(e="",f=0;f<l.length;f++)e.length>0?e=e+", "+l[f]:(e+="0, ",e+=l[f]);for(s="",f=0;f<rt.length;f++)s=s.length>0?s+", "+rt[f]:s+rt[f];for(c="",f=0;f<ut.length;f++)c=c.length>0?c+", "+ut[f]:c+ut[f];for(a="",f=0;f<ft.length;f++)a=a.length>0?a+", "+ft[f]:a+ft[f];gr?t.ajax({url:VIS.Application.contextUrl+"Inventory/GetProducts",dataType:"json",data:{searchText:tf,warehouse_IDs:o,org_IDs:e,plv_IDs:s,supp_IDs:c,prodCat_IDs:a,pageNo:v,pageSize:rf},success:function(n){rh(n)}}):VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetProductCount",{searchText:tf,warehouse_IDs:o,org_IDs:e,plv_IDs:s,supp_IDs:c,prodCat_IDs:a},yl)}}function yl(n){var c,f,r,e,o,s,i,h;for(yf=n,c=ts(),di.empty(),f="",i=0;i<u.length;i++)f=f.length>0?f+", "+u[i]:f+u[i];for(r="",i=0;i<l.length;i++)r.length>0?r=r+", "+l[i]:(r+="0, ",r+=l[i]);for(e="",i=0;i<rt.length;i++)e=e.length>0?e+", "+rt[i]:e+rt[i];for(o="",i=0;i<ut.length;i++)o=o.length>0?o+", "+ut[i]:o+ut[i];for(s="",i=0;i<ft.length;i++)s=s.length>0?s+", "+ft[i]:s+ft[i];for(h=1;h<c+1;h++)di.append("<option value="+h+">"+h+"<\/option>");t.ajax({url:VIS.Application.contextUrl+"Inventory/GetProducts",dataType:"json",data:{searchText:tf,warehouse_IDs:f,org_IDs:r,plv_IDs:e,supp_IDs:o,prodCat_IDs:s,pageNo:v,pageSize:rf},success:function(n){rh(n)}})}function rh(r){var e,f,u;for(ti=!1,no(),gr=!1,lu=[],i.clear(),e=0,f=jQuery.parseJSON(r),u=0;u<f.length;u++)e=e+1,lu.push({recid:e,M_Product_ID:f[u].M_Product_ID,SearchKey:f[u].Value,Product:f[u].Name,UPC:f[u].UPC,QtyOnHand:parseFloat(f[u].QtyOnHand).toLocaleString(),UOM:f[u].UOM,C_UOM_ID:f[u].C_UOM_ID,Reserved:parseFloat(f[u].Reserved).toLocaleString(),QtyAvailable:parseFloat(f[u].QtyAvailable).toLocaleString(),UnConfirmed:parseFloat(f[u].UnConfirmed).toLocaleString(),Ordered:f[u].Ordered,Demanded:f[u].Demanded,TillReorder:f[u].TillReorder,QtyToReplenish:parseFloat(f[u].QtyToReplenish).toLocaleString(),MinLevel:f[u].MinLevel,Status:""});w2utils.encodeTags(lu);i.add(lu);i.selectNone();h=0;lu=[];wl();di[0]!=null&&(di[0].selectedIndex=v-1);vi.css("display","block");yi.css("display","none");t("#VA011_btnGenerateReplenish_"+n.windowNo).css("display","none");t("#VA011_btnReplenish_"+n.windowNo).css("display","block");cr&&cr.css("display","block");lr&&lr.css("display","block");ar&&ar.css("display","block");ff&&ff.css("display","none");er.css("display","block");kr.val("");yr.val("");tr.val("");pr.val("");si.val("");t(cf.find("input")[0]).focus();sf()}function pl(n){be=[];go=!0;for(var t=0;t<n.length;t++)n[t]==-999999999?(i.records[t].QtyToReplenish=0,be.push(t)):i.records[t].QtyToReplenish=n[t];i.refresh();uh();er.css("display","block");y||(r[0].style.visibility="hidden")}function uh(){var r,u,f;if(go&&i.records!=null)for(r=0;r<i.records.length;r++)be.map(function(n){return n==r}).indexOf(!0)>=0||(u="",i.records[r].QtyOnHand>i.records[r].MinLevel&&i.records[r].QtyOnHand-i.records[r].Demanded+i.records[r].Ordered+i.records[r].UnConfirmed>i.records[r].MinLevel?u=VIS.Application.contextUrl+"Areas/VA011/Images/green.png":i.records[r].QtyOnHand<i.records[r].MinLevel&&i.records[r].QtyOnHand-i.records[r].Demanded+i.records[r].Ordered+i.records[r].UnConfirmed>i.records[r].MinLevel||i.records[r].QtyOnHand>i.records[r].MinLevel&&i.records[r].QtyOnHand-i.records[r].Demanded+i.records[r].Ordered+i.records[r].UnConfirmed<i.records[r].MinLevel?u=VIS.Application.contextUrl+"Areas/VA011/Images/yellow.png":i.records[r].QtyOnHand<i.records[r].MinLevel&&i.records[r].QtyOnHand-i.records[r].Demanded+i.records[r].Ordered+i.records[r].UnConfirmed<i.records[r].MinLevel&&(u=VIS.Application.contextUrl+"Areas/VA011/Images/red.png"),f=r+1,t("#grid_VA011_gridProd_"+n.windowNo+"_rec_"+f).find("img").prop("src",u))}function wl(){a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab");st.css("display","none");ht.css("display","none");at.css("display","none");lt.css("display","none");ct.css("display","none");ot.css("display","block");vt.css("display","none");t("#VA011_btnVariant_"+n.windowNo).addClass("VA011-selectedTab");li.clear();fi.clear();ui.clear();ci.clear();hi.clear();dt.clear();s!=null&&s.clear()}function bl(){r=t('<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"><\/i><\/div><\/div>');r[0].style.visibility="visible";vr.append(r)}function kl(){}function dl(){y||(r[0].style.visibility="hidden")}function gl(){eo.append(ir);ir.append('<div class="VA011-product-data input-group vis-input-wrap"><div class="vis-control-wrap"><select class="vis-ev-col-mandatory" id="VA011_cmbWarehouse_'+n.windowNo+'"><\/select><label>'+VIS.Msg.getMsg("VA011_Warehouse")+'<\/label><\/div><\/div><div class="VA011-product-data input-group vis-input-wrap"><div class="vis-control-wrap"><select class="vis-ev-col-mandatory" id="VA011_cmbCat_'+n.windowNo+'"><\/select><label>'+VIS.Msg.getMsg("VA011_ReplenishmentCreate")+'<\/label><\/div><\/div><div class="VA011-product-data input-group vis-input-wrap"><div class="vis-control-wrap"><select id="VA011_cmbType_'+n.windowNo+'" ><\/select><label>'+VIS.Msg.getMsg("VA011_DocumentType")+'<\/label><\/div><\/div><div class="VA011-product-data input-group vis-input-wrap"><div class="vis-control-wrap"><select id="VA011_cmbVendor_'+n.windowNo+'"><\/select><label>'+VIS.Msg.getMsg("VA011_Vendor")+'<\/label><\/div><\/div><div class="VA011-product-data input-group vis-input-wrap"><div class="vis-control-wrap"><select class="vis-ev-col-mandatory" id="VA011_cmbDocStatus_'+n.windowNo+'" ><\/select><label>'+VIS.Msg.getMsg("VA011_DocStatus")+'<\/label><\/div><\/div><div class="VA011-product-data input-group vis-input-wrap"><div class="vis-control-wrap"><label class="vis-ec-col-lblchkbox"><input id="VA011_ConsiderOrderPack'+n.windowNo+'" type="checkbox">'+VIS.Msg.getMsg("VA011_ConsiderOrderPack")+"<\/label><\/div><\/div>");or=ir.find("#VA011_cmbCat_"+n.windowNo);sr=ir.find("#VA011_cmbType_"+n.windowNo);hr=ir.find("#VA011_cmbDocStatus_"+n.windowNo);gi=ir.find("#VA011_cmbWarehouse_"+n.windowNo);nu=ir.find("#VA011_cmbVendor_"+n.windowNo)}function na(){us.append(it);oo.append(us).append(fs);bo=t('<div class="VA011-gridCls" style="display:block; height:100%"><\/div>');fs.append(bo)}function ta(n){while(n.read())key=n.getString(0),value=n.getString(1),or.append(" <option value="+key+">"+VIS.Utility.encodeText(value)+"<\/option>");n.close();ia()}function ia(){sr.empty();var n="SELECT C_DocType_ID, Name, DocBaseType FROM C_DocType WHERE DocBaseType IN (SELECT Value FROM AD_Ref_List WHERE AD_Reference_ID =(SELECT AD_Reference_ID FROM AD_Reference WHERE Name = 'M_Replenishment Create')) AND IsReturnTrx ='N' AND AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID");VIS.DB.executeReader(n,null,ra)}function ra(n){while(n.read())key=n.getString(0),ws.push(key),value=n.getString(1),bs.push(value),ko.push(n.getString(2));n.close();fa()}function ua(n){for(hr.append(" <option value = 0><\/option>");n.read();)key=n.getString(0),value=n.getString(1),hr.append(" <option value="+key+">"+VIS.Utility.encodeText(value)+"<\/option>");n.close();w(!1)}function fa(){hr.empty();VIS.DB.executeReader("SELECT Value,  Name FROM AD_Ref_List WHERE ad_reference_ID = (SELECT AD_Reference_ID FROM AD_Reference  WHERE Name = '_Document Status') AND Value IN ('DR', 'CO', 'IP')",null,ua)}function ea(){ni=[];VIS.DB.executeReader("SELECT Value, Name FROM AD_Ref_List WHERE AD_Reference_ID = (SELECT AD_Reference_ID FROM AD_Reference WHERE Name = 'M_Replenish Type' ) AND Value IN ('1','2')",null,oa)}function oa(n){for(ni.push({id:"-1",text:""});n.read();)key=n.getString(0),value=n.getString(1),ni.push({id:key,text:value});n.close();ah=!0;el();tt.append(vt);sa()}function sa(){or.empty();VIS.DB.executeReader("SELECT Value, Name FROM AD_Ref_List WHERE ad_reference_ID = (SELECT AD_Reference_ID FROM AD_Reference  WHERE Name = 'M_Replenishment Create')",null,ta)}function ha(){fr=[];fr.push({id:0,text:VIS.Msg.getMsg("Select")});var n=VIS.MRole.getDefault().addAccessSQL("SELECT C_UOM_ID,Name FROM C_UOM WHERE IsActive = 'Y'","C_UOM",VIS.MRole.SQL_FULLYQUALIFIED,VIS.MRole.SQL_RO);VIS.DB.executeReader(n.toString(),null,ca)}function ca(n){while(n.read())key=VIS.Utility.Util.getValueOfInt(n.getString(0)),value=n.getString(1),fr.push({id:key,text:value});n.close();tc()}function ts(){var n=yf%rf;return n!=0?parseInt(yf/rf)+1:parseInt(yf/rf)}function uu(){var t,n;if(i.records.length>0){for(t=[],n=0;n<i.records.length;n++)t.push(VIS.Utility.Util.getValueOfInt(i.records[n].M_Product_ID));r[0].style.visibility="visible";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetReplenish",{ColumnName:t,whIDs:u},pl)}}function la(){bt.onOkClick=function(){var s=gi.val(),u=nu.val(),f=sr.val(),i,e,o;if(f==null&&(f=0),i=hr.val(),ks=i,e=or.val(),u==null&&(u=0),o="N",t("#VA011_ConsiderOrderPack"+n.windowNo)[0].checked&&(o="Y"),s==null||i==null||e==null)return VIS.ADialog.error("FillMandatory"),!1;r[0].style.visibility="visible";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GenerateReplenishmentReport",{M_Warehouse_ID:s,C_BPartner_ID:u,C_DocType_ID:f,DocStatus:i,Create:e,OrderPack:o},aa)};bt.onCancelClick=function(){};or.on("change",function(){sr.empty();for(var n=0;n<ko.length;n++)ko[n]==or.val()&&sr.append(" <option value="+ws[n]+">"+VIS.Utility.encodeText(bs[n])+"<\/option>")});sr.on("change",function(){});gi.on("change",function(){console.log("Warehouse Change Event Fired")})}function aa(i){var f,u;if(kt.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#VA011_GenReplenish_"+n.windowNo).addClass("VA011-selectedTab"),t("#VA011_btnReplenish_"+n.windowNo).css("display","none"),t("#VA011_btnGenerateReplenish_"+n.windowNo).css("display","block"),cr&&cr.css("display","none"),lr&&lr.css("display","none"),ar&&ar.css("display","none"),ff&&ff.css("display","block"),er.css("display","none"),grdPrepTopValues=[],o.clear(),f=0,i.Table!=null)for(u=0;u<i.Table.length;u++)f=f+1,grdPrepTopValues.push({recid:f,AD_Client_ID:i.Table[u].AD_CLIENT_ID,AD_Org_ID:i.Table[u].AD_ORG_ID,RepCreate:i.Table[u].REPLENISHMENTCREATE,M_PriceList_ID:i.Table[u].M_PRICELIST_ID,M_WarehouseSource_ID:i.Table[u].M_WAREHOUSESOURCE_ID,M_Product_ID:i.Table[u].M_PRODUCT_ID,M_Warehouse_ID:i.Table[u].M_WAREHOUSE_ID,C_BPartner_ID:i.Table[u].C_BPARTNER_ID,C_DocType_ID:i.Table[u].C_DOCTYPE_ID,DocStatus:ks,Product:i.Table[u].PRODUCT,Warehouse:i.Table[u].WAREHOUSE,SourceWarehouse:i.Table[u].SOURCEWAREHOUSE,ReplenishmentType:i.Table[u].REPLENISHTYPE,Max:i.Table[u].LEVEL_MAX,Min:i.Table[u].LEVEL_MIN,QtyOnHand:i.Table[u].QTYONHAND,Ordered:i.Table[u].QTYORDERED,ReqReserved:i.Table[u].DTD001_QTYRESERVED,Reserved:i.Table[u].QTYRESERVED,QtyToOrder:i.Table[u].QTYTOORDER});w2utils.encodeTags(grdPrepTopValues);o.add(grdPrepTopValues);o.selectNone();h=0;grdPrepTopValues=[];vi.css("display","none");yi.css("display","block");r[0].style.visibility="hidden"}function va(n,t){VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/"+t,{Value:"",orgs:l,fill:!0},ya)}function ya(n){datasource=[];for(var i=0;i<n.length;i++)datasource.push({label:n[i].Name,value:n[i].Name,ids:n[i].ID});t(si[0]).autocomplete("option","source",datasource);t(si[0]).autocomplete("search","");t(si[0]).trigger("focus")}function ke(n,i){t.ajax({url:VIS.Application.contextUrl+"Inventory/"+i,datatype:"json",type:"get",cache:!1,data:{value:"",fill:!0},success:function(i){var u=JSON.parse(i),r;for(datasource=[],r=0;r<u.length;r++)datasource.push({label:u[r].Name,value:u[r].Name,ids:u[r].ID});t(n[0]).autocomplete("option","source",datasource);t(n[0]).autocomplete("search","");t(n[0]).trigger("focus")}})}function pa(){var i,n,t;if(i=0,o.getSelection().length>0){for(r[0].style.visibility="visible",n=0;n<o.records.length;n++)o.getSelection().map(function(t){return t==o.records[n].recid}).indexOf(!0)>=0&&(t={AD_Client_ID:o.records[n].AD_Client_ID,AD_Org_ID:o.records[n].AD_Org_ID,RepCreate:o.records[n].RepCreate,M_PriceList_ID:o.records[n].M_PriceList_ID,C_BPartner_ID:o.records[n].C_BPartner_ID,C_DocType_ID:o.records[n].C_DocType_ID,DocStatus:o.records[n].DocStatus,M_Product_ID:o.records[n].M_Product_ID,M_WarehouseSource_ID:o.records[n].M_WarehouseSource_ID,M_Warehouse_ID:o.records[n].M_Warehouse_ID,Max:o.records[n].Max,Min:o.records[n].Min,Ordered:o.records[n].Ordered,QtyOnHand:o.records[n].QtyOnHand,QtyToOrder:o.records[n].QtyToOrder,ReplenishmentType:o.records[n].ReplenishmentType,ReqReserved:o.records[n].ReqReserved,Reserved:o.records[n].Reserved},de.push(t));VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GenerateReps",{Reps:de},wa)}else VIS.ADialog.error("VA011_PleaseSelectaRecord"),r[0].style.visibility="hidden"}function wa(n){console.log(n);de=[];vi.css("display","block");yi.css("display","none");n!=null&&n!=""&&VIS.ADialog.info("","",n,"");w(!1)}function ba(){function f(){it.on("change",function(){ih()});ri.onCancelClick=function(){};ri.onOkClick=function(){var t=[],o="",n,f;for(r[0].style.visibility="visible",n=0;n<e.records.length;n++){recSelected=!0;o+=i.records[n].M_Product_ID+",";var s=it.val(),h=e.records[n].M_Product_ID,u=e.records[n].Type,c=e.records[n].Min,l=e.records[n].Max,a=e.records[n].Qty,v=e.records[n].SourceWarehouse,y=e.records[n].OrderPack;if(u==""||u==null)return VIS.ADialog.error("VA011_ReplenishTypeNotSetFor",!0,+ " : "+e.records[n].Product),r[0].style.visibility="hidden",!1;f={M_Warehouse_ID:it.val(),M_Product_ID:e.records[n].M_Product_ID,RepType:e.records[n].Type,Min:e.records[n].Min,Max:e.records[n].Max,OrderPack:e.records[n].OrderPack,Qty:e.records[n].Qty,SourceWarehouse:e.records[n].SourceWarehouse};t.push(f)}VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/SaveReplenishmentRuleAll",{RepAll:t},th)}}kr.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();n.target.className.indexOf("VA011-imgCombo")>=0&&ke(kr,"GetProductCategories")});yr.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();n.target.className.indexOf("VA011-imgCombo")>=0&&ke(yr,"GetOrgs")});si.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();n.target.className.indexOf("VA011-imgCombo")>=0&&va(si,"GetOrgWarehouse")});pr.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();n.target.className.indexOf("VA011-imgCombo")>=0&&ke(pr,"GetPLV")});tr.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();n.target.className.indexOf("VA011-imgCombo")>=0&&ke(tr,"GetSupplier")});ro.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();tf=eu.val();v=1;w(!1)});eu.on("keyup",function(){event.keyCode==13&&(tf=eu.val(),v=1,w(!1))});c.on("click touchstart","LI",function(n){var i,r;n.preventDefault();n.stopPropagation();i=t(n.target).attr("id");i.indexOf("VA011_btnDetails_")>=0?ti||(c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),sf()):i.indexOf("VA011_btnSubsti_")>=0?ti||(c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),oe()):i.indexOf("VA011_btnRelated_")>=0?ti||(c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),se()):i.indexOf("VA011_btnSuppliers_")>=0?ti||(c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),he()):i.indexOf("VA011_btnKits_")>=0?ti||(c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),ce()):i.indexOf("VA011_btnCart_")>=0&&(r=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetModuleInfo",{_prefix:"VAICNT_"}),r==!1?VIS.ADialog.error("VA011_PleaseinsallVAICNT"):(c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),nr()))});co.on("click touchstart","LI",function(n){n.preventDefault();n.stopPropagation();var i=t(n.target).attr("id")});kt.on("click touchstart","LI",function(n){var s,v,h,a,l,c,o;if(n.preventDefault(),n.stopPropagation(),s=t(n.target).attr("id"),s.indexOf("VA011_btnReplenish_")>=0)vi.css("display","block"),yi.css("display","none"),uu();else if(s.indexOf("VA011_StockDet_")>=0)r[0].style.visibility="visible",vi.css("display","block"),yi.css("display","none"),w(!1);else if(s.indexOf("VA011_btnGenerateReplenish_")>=0)r[0].style.visibility="visible",pa();else if(s.indexOf("VA011_GenReplenish_")>=0)hr[0].selectedIndex=1,bt=new VIS.ChildDialog,bt.setContent(eo),eo.show(),bt.setWidth(320),bt.setTitle(VIS.Msg.getMsg("VA011_Replenishments")),bt.setModal(!0),bt.onClose=function(){},bt.show(),sr[0].selectedIndex=-1,or[0].selectedIndex=-1,gi[0].selectedIndex=-1,nu[0].selectedIndex=-1,la();else if(s.indexOf("VA011_btnAddToCart_")>=0)if(v=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/GetModuleInfo",{_prefix:"VAICNT_"}),v==!1)VIS.ADialog.error("VA011_PleaseinsallVAICNT");else if(parseFloat(vf)>0)if(i.getSelection()<=0)VIS.ADialog.error("VA011_PleaseSelectaRecord");else{for(ef=[],h=i.getSelection(),a=1,o=0;o<h.length;o++)ef.push({recid:a,product_ID:i.records[h[o]-1].M_Product_ID,Product:i.records[h[o]-1].Product,C_Uom_ID:i.records[h[o]-1].C_UOM_ID,Attribute_ID:0,Attribute:"",UPC:"",Qty:1}),a++;ga()}else VIS.ADialog.error("VA011_CartNotSelected");else if(s.indexOf("VA011_DisplayReplenishRule_")>=0){if(i.getSelection().length<=0){VIS.ADialog.error("VA011_PleaseSelectaRecord");r[0].style.visibility="hidden";return}if(hr[0].selectedIndex=1,ri=new VIS.ChildDialog,ri.setContent(oo),oo.show(),ri.setHeight(400),ri.setWidth(800),ri.setTitle(VIS.Msg.getMsg("VA011_ReplenishmentsRule")),ri.setModal(!0),ri.onClose=function(){},l=0,l=u.length>0?u[0]:VIS.context.getContext("#M_Warehouse_ID"),c=0,e==null){for(il(),o=0;o<pt.length;o++)l==pt[o].id&&(c=o),it.append("<option value="+pt[o].id+">"+pt[o].text+"<\/option>");it[0].selectedIndex=c}else{for(it.empty(),o=0;o<pt.length;o++)l==pt[o].id&&(c=o),it.append("<option value="+pt[o].id+">"+pt[o].text+"<\/option>");it[0].selectedIndex=c}ri.show();ih();f()}});a.on("click touchstart","LI",function(n){if(n.preventDefault(),n.stopPropagation(),!ti){var i=t(n.target).attr("id");i.indexOf("VA011_btnVariant_")>=0?(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),st.css("display","none"),ht.css("display","none"),at.css("display","none"),lt.css("display","none"),ct.css("display","none"),ot.css("display","block"),vt.css("display","none"),t("#"+i).addClass("VA011-selectedTab"),ru()):i.indexOf("VA011_btnLocators_")>=0?(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),ht.css("display","none"),at.css("display","none"),lt.css("display","none"),ct.css("display","none"),ot.css("display","none"),st.css("display","block"),vt.css("display","none"),le()):i.indexOf("VA011_btnOrdered")>=0?(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),ht.css("display","block"),at.css("display","none"),lt.css("display","none"),ct.css("display","none"),ot.css("display","none"),st.css("display","none"),vt.css("display","none"),ae()):i.indexOf("VA011_btnReplenished_")>=0?(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),ht.css("display","none"),at.css("display","none"),lt.css("display","none"),ct.css("display","block"),ot.css("display","none"),st.css("display","none"),vt.css("display","none"),ve()):i.indexOf("VA011_btnDemand_")>=0?(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),ht.css("display","none"),at.css("display","none"),lt.css("display","block"),ct.css("display","none"),ot.css("display","none"),st.css("display","none"),vt.css("display","none"),ye()):i.indexOf("VA011_btnTransactions_")>=0?(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),t("#"+i).addClass("VA011-selectedTab"),ht.css("display","none"),at.css("display","block"),lt.css("display","none"),ct.css("display","none"),ot.css("display","none"),st.css("display","none"),vt.css("display","none"),pe()):i.indexOf("VA011_btnReplenishmentB_")>=0&&(a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab"),st.css("display","none"),ht.css("display","none"),at.css("display","none"),lt.css("display","none"),ct.css("display","none"),ot.css("display","none"),vt.css("display","block"),t("#"+i).addClass("VA011-selectedTab"),we())}});if(oi)oi.on("click touchstart","LI",function(n){n.preventDefault();n.stopPropagation();pcat_ID=VIS.Utility.Util.getValueOfInt(t(n.target).attr("procatid"));var i=t(n.target).text();i=" -> "+i.substr(0,i.indexOf("("));pcat_ID>0&&(oi.find("LI").removeClass("VA011-cat-selected"),oi.find("LI").css("opacity",.6),oi.find("li[procatid='"+pcat_ID+"']").addClass("VA011-cat-selected"),oi.find("li[procatid='"+pcat_ID+"']").css("opacity",1),ch=pcat_ID,v=1,w(!1))});di.on("change",function(){v!=di.val()&&(v=di.val(),w(!0),kt.find("#VA011_btnReplenish_"+n.windowNo).hasClass("VA011-selectedTab")&&uu())});ki.on("click touchstart","LI",function(i){var r;if(i.preventDefault(),i.stopPropagation(),t(i.target).attr("action")=="first")v!=1&&(v=1,gr=!0,w(!0),kt.find("#VA011_btnReplenish_"+n.windowNo).hasClass("VA011-selectedTab")&&uu());else if(t(i.target).attr("action")=="prev")v!=1&&(v--,gr=!0,w(!0),kt.find("#VA011_btnReplenish_"+n.windowNo).hasClass("VA011-selectedTab")&&uu());else if(t(i.target).attr("action")=="next"){if(r=ts(),v>=r)return;v++;gr=!0;w(!0);kt.find("#VA011_btnReplenish_"+n.windowNo).hasClass("VA011-selectedTab")&&uu()}else if(t(i.target).attr("action")=="last"){if(r=ts(),v>=r)return;gr=!0;v=r;w(!0);kt.find("#VA011_btnReplenish_"+n.windowNo).hasClass("VA011-selectedTab")&&uu()}});io.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();var t=fu.width(),r=hf.width();t>50&&wt.hide();fu.animate({width:t>50?40:200},300,"swing",function(){t<50&&wt.show();i.resize();i.refresh();uh();dt.resize();fi.resize();ci.refresh();ui.resize();hi.resize();li.resize();s.resize();bi.resize();ur.resize();pi.resize();wi.resize();cartGrid.resize()})});br.on("click touchstart",function(n){var i,u,r,f;n.preventDefault();n.stopPropagation();i=n.target;i.className!="VA011-clsDIV"&&(u=-1,r=-1,i.id.indexOf("VA011_spnOrg")>=0?(f=i.id.replace("VA011_spnOrg",""),r=t("#VA011_chkOrg"+f).attr("value")):i.id.indexOf("VA011_chkOrg")>=0&&(r=t("#"+i.id).attr("value")),u=l.indexOf(VIS.Utility.Util.getValueOfInt(r)),u>-1&&(l=jQuery.grep(l,function(n){return n!=r})),i.parentElement.remove(),v=1,nh(),w(!1))});ou.on("click touchstart",function(n){var i,u,r,f;n.preventDefault();n.stopPropagation();i=n.target;i.className!="VA011-clsDIV"&&(u=-1,r=-1,i.id.indexOf("VA011_spnPLV")>=0?(f=i.id.replace("VA011_spnPLV",""),r=t("#VA011_chkPLV"+f).attr("value")):i.id.indexOf("VA011_chkPLV")>=0&&(r=t("#"+i.id).attr("value")),u=rt.indexOf(VIS.Utility.Util.getValueOfInt(r)),u>-1&&(rt=jQuery.grep(rt,function(n){return n!=r})),i.parentElement.remove(),v=1,w(!1))});su.on("click touchstart",function(n){var i,u,r,f;n.preventDefault();n.stopPropagation();i=n.target;i.className!="VA011-clsDIV"&&(u=-1,r=-1,i.id.indexOf("VA011_spnSupplier")>=0?(f=i.id.replace("VA011_spnSupplier",""),r=t("#VA011_chkSupplier"+f).attr("value")):i.id.indexOf("VA011_chkSupplier")>=0&&(r=t("#"+i.id).attr("value")),u=ut.indexOf(VIS.Utility.Util.getValueOfInt(r)),u>-1&&(ut=jQuery.grep(ut,function(n){return n!=r})),i.parentElement.remove(),v=1,w(!1))});wr.on("click touchstart",function(n){var i,f,r,e;n.preventDefault();n.stopPropagation();i=n.target;i.className!="VA011-clsDIV"&&(f=-1,r=-1,i.id.indexOf("VA011_spnWh")>=0?(e=i.id.replace("VA011_spnWh",""),r=t("#VA011_chkWh"+e).attr("value")):i.id.indexOf("VA011_chkWh")>=0&&(r=t("#"+i.id).attr("value")),f=u.indexOf(VIS.Utility.Util.getValueOfInt(r)),f>-1&&(u=jQuery.grep(u,function(n){return n!=r})),i.parentElement.remove(),v=1,w(!1))});hu.on("click touchstart",function(n){var i,u,r,f;n.preventDefault();n.stopPropagation();i=n.target;i.className!="VA011-clsDIV"&&(u=-1,r=-1,i.id.indexOf("VA011_spnCategories")>=0?(f=i.id.replace("VA011_spnCategories",""),r=t("#VA011_chkCategories"+f).attr("value")):i.id.indexOf("VA011_chkCategories")>=0&&(r=t("#"+i.id).attr("value")),u=ft.indexOf(VIS.Utility.Util.getValueOfInt(r)),u>-1&&(ft=jQuery.grep(ft,function(n){return n!=r})),i.parentElement.remove(),v=1,w(!1))});os.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();cu.hide();dr.show()});ss.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();ge(nt.val(),"VAICNT_InventoryCount")});hs.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();ee()});lo.on("click touchstart",function(n){if(n.preventDefault(),n.stopPropagation(),VIS.Utility.Util.getValueOfString(rr.val())==""){VIS.ADialog.error("VA011_EnterScanName");return}fh()});lo.on("keydown",function(n){if(n.keyCode==13){if(VIS.Utility.Util.getValueOfString(rr.val())==""){VIS.ADialog.error("VA011EnterScanName");return}fh()}});ao.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();dr.hide();cu.show();rr.val("")});ao.on("keydown",function(n){n.keyCode==13&&(dr.hide(),cu.show(),rr.val(""))});nt.on("change",function(){vf=nt.val();t("#VA011_CartLabel"+n.windowNo).text(nt.find("option:selected").text());nr()})}function fh(){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"Inventory/saveInventoryCount",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({ColumnName:rr.val()}),success:function(n){n.result!=""?(dr.hide(),cu.show(),rr.val(""),vf=n.result,ee(),nr()):(r[0].style.visibility="hidden",VIS.ADialog.error(RecordNotSaved))},error:function(n,t,i){console.log(t);r[0].style.visibility="hidden";VIS.ADialog.error(i);return}})}function ka(){var n=[];for(item in cartGrid.records)cartGrid.records[item].updated==!0&&n.push(cartGrid.records[item]);n.length>0&&(r[0].style.visibility="visible",t.ajax({type:"POST",url:VIS.Application.contextUrl+"Inventory/updateInventory",dataType:"json",async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({count_id:nt.val(),ColumnName:n}),success:function(n){r[0].style.visibility="hidden";n.result==""?(nr(),t(".VA005-cart-update").fadeIn(),t(".VA005-cart-update").fadeOut(2e3)):VIS.ADialog.error(n.result)},error:function(n,t){console.log(t);r[0].style.visibility="hidden";VIS.ADialog.error("RecordNotSaved");return}}))}function da(){r[0].style.visibility="visible";var n=[],i=cartGrid.getSelection();for(item in i)n.push(cartGrid.get(i[item]));t.ajax({type:"POST",url:VIS.Application.contextUrl+"Inventory/deleteInventory",dataType:"json",async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({ColumnName:n}),success:function(n){r[0].style.visibility="hidden";n.result==""?(nr(),cartGrid.selectNone()):(VIS.ADialog.error(n.result),nr())},error:function(n,t){console.log(t);r[0].style.visibility="hidden";VIS.ADialog.error("DeleteError");return}})}function ga(){ef.length>0&&(r[0].style.visibility="visible",VIS.dataContext.getJSONData(VIS.Application.contextUrl+"Inventory/SaveInventory",{Count_ID:nt.val(),ColumnName:ef},nv))}function nv(n){n.result==""?nr():VIS.ADialog.error(n.result);ef=[];r[0].style.visibility="hidden"}function ai(n){var t=n;return t!=""&&(t=new Date(t),t=t.toLocaleDateString()),t}function tv(){var i,r;h=0;tt.css("opacity","1");pf.css("opacity","1");wf.css("opacity","1");bf.css("opacity","1");kf.css("opacity","1");df.css("opacity","1");gf.css("opacity","1");ne.css("opacity","1");te.css("opacity","1");ie.css("opacity","1");re.css("opacity","1");h=0;t("#VA011_RightSection"+n.windowNo).css("display","block");t("#VA011_grdSubstitute_"+n.windowNo).css("display","none");t("#VA011_grdRelated_"+n.windowNo).css("display","none");t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none");t("#VA011_grdKits_"+n.windowNo).css("display","none");k.hide();g.hide();c.find(".VA011-tabs").children().removeClass("VA011-selectedTab");t("#VA011_btnDetails_"+n.windowNo).addClass("VA011-selectedTab");tu.css("display","none");t("#VA011_prodName_"+n.windowNo).text("");t("#VA011_inputWeight_"+n.windowNo).val("");t("#VA011_inputVolume_"+n.windowNo).val("");t("#VA011_inputTare_"+n.windowNo).val("");t("#VA011_inputLocator_"+n.windowNo).val("");t("#VA011_inputExpDays_"+n.windowNo).val("");t("#VA011_inputUOM_"+n.windowNo).val("");t("#VA011_UPC"+n.windowNo).find("span").remove();t("#VA011_UPC"+n.windowNo).append("<span><\/span>");t("#VA011_AttributeSet"+n.windowNo).find("span").remove();t("#VA011_AttributeSet"+n.windowNo).append("<span><\/span>");i="";i!=null?i!=""?(i=i.substring(i.lastIndexOf("/")+1,i.length),r=new Date,p.removeAttr("src"),p.attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+i+"?"+r.getTime())):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png");a.find(".VA011_bottomGridHeaderSec").children().removeClass("VA011-selectedTab");st.css("display","none");ht.css("display","none");at.css("display","none");lt.css("display","none");ct.css("display","none");ot.css("display","block");vt.css("display","none");t("#VA011_btnVariant_"+n.windowNo).addClass("VA011-selectedTab");ru()}function no(){var i,r;ti?(tt.css("opacity","0.4"),pf.css("opacity","0.4"),wf.css("opacity","0.4"),bf.css("opacity","0.4"),kf.css("opacity","0.4"),df.css("opacity","0.4"),gf.css("opacity","0.4"),ne.css("opacity","0.4"),te.css("opacity","0.4"),ie.css("opacity","0.4"),re.css("opacity","0.4"),h=0,c.find(".VA011-selectedTab")[0].id.indexOf("VA011_RightSection")>=0?(t("#VA011_RightSection"+n.windowNo).css("display","block"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#VA011_btnDetails_"+n.windowNo).addClass("VA011-selectedTab")):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnDetails")>=0?(t("#VA011_RightSection"+n.windowNo).css("display","block"),t("#VA011_grdSubstitute_"+n.windowNo).css("display","none"),t("#VA011_grdRelated_"+n.windowNo).css("display","none"),t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","none"),t("#VA011_grdKits_"+n.windowNo).css("display","none"),k.hide(),g.hide(),c.find(".VA011-tabs").children().removeClass("VA011-selectedTab"),t("#VA011_btnDetails_"+n.windowNo).addClass("VA011-selectedTab")):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnSubsti")>=0?(t("#VA011_grdSubstitute_"+n.windowNo).css("display","block"),oe()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnRelated")>=0?(t("#VA011_grdRelated_"+n.windowNo).css("display","block"),se()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnSuppliers")>=0?(t("#VA011_grdSuppliersRight_"+n.windowNo).css("display","block"),he()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnKits")>=0?(t("#VA011_grdKits_"+n.windowNo).css("display","block"),ce()):c.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnCart")>=0&&t("#VA011_divCart_"+n.windowNo).css("display","block"),tu.css("display","none"),t("#VA011_prodName_"+n.windowNo).text(""),t("#VA011_inputWeight_"+n.windowNo).val(""),t("#VA011_inputVolume_"+n.windowNo).val(""),t("#VA011_inputTare_"+n.windowNo).val(""),t("#VA011_inputLocator_"+n.windowNo).val(""),t("#VA011_inputExpDays_"+n.windowNo).val(""),t("#VA011_inputUOM_"+n.windowNo).val(""),t("#VA011_UPC"+n.windowNo).find("span").remove(),t("#VA011_UPC"+n.windowNo).append("<span><\/span>"),t("#VA011_AttributeSet"+n.windowNo).find("span").remove(),t("#VA011_AttributeSet"+n.windowNo).append("<span><\/span>"),i="",i!=null?i!=""?(i=i.substring(i.lastIndexOf("/")+1,i.length),r=new Date,p.removeAttr("src"),p.attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+i+"?"+r.getTime())):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"):p.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA011/Images/img-defult.png"),a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnVariant")>=0?ru():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnReplenished")>=0?ve():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnLocators")>=0?le():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnOrdered")>=0?ae():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnDemand")>=0?ye():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnTransactions")>=0?pe():a.find(".VA011-selectedTab")[0].id.indexOf("VA011_btnReplenishmentB")>=0&&we()):(tt.css("opacity","1"),pf.css("opacity","1"),wf.css("opacity","1"),bf.css("opacity","1"),kf.css("opacity","1"),df.css("opacity","1"),gf.css("opacity","1"),ne.css("opacity","1"),te.css("opacity","1"),ie.css("opacity","1"),re.css("opacity","1"))}var iu,ee,be,de,ge;this.frame;this.windowNo;var n=this,vr=t('<div class="vis-group-assign-content" style="height:100%">'),to,fu,io,oi,wt,hf,cf,eu,ro,tt=null,yr=null,si=null,pr=null,tr=null,wr=null,ou=null,su=null,tr=null,br=null,hu=null,kr=null,lf,is,iv=t('<div style="display: inline-block;float:left;height:100%;width:200px;background:rgb(87, 87, 87);">'),r=null,uo=null,rs=null,fo=null,eo=t('<div style="display:none; " class="vis-forms-container"><\/div>'),oo=t('<div class="112233" style="display:block; height:100%"><\/div>'),us=t('<div  style="width:auto; margin-bottom:10px;"><\/div>'),fs=t('<div class="11223344" style="overflow-y:auto; height:calc(100% - 40px)"><\/div>'),it=t('<select class="vis-statusbar-combo" style="width:200px;"><\/select>'),ri=null,eh=[],ir=t('<div style="overflow-y:auto; padding-top: 5px;"><\/div>'),bt=null,so=null,oh=null,ho=null,g=null,k=null,dr=null,cu=null,sh=null,hh=null,kt=null,a=null,c=null,es=null,co=null,af=null,f=2,rr=null,nt=null,vf=0,os=null,ss=null,hs=null,lo=null,ao=null,cs=null,et=VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount),d=VIS.Env.isDecimalPoint(),vi=null,i=null,lu=[],yi=null,o=null,ot=null,dt=null,au=[],st=null,hi=null,vu=[],ht=null,ci=null,yu=[],ct=null,ui=null,gt=[],lt=null,fi=null,pu=[],at=null,li=null,wu=[],vt=null,s=null,bu=[],vo=null,ur=null,ku=[],yo=null,pi=null,du=[],po=null,wi=null,gu=[],wo=null,bi=null,nf=[],bo=null,e=null,yt=[],tf="",fr=[],ni=[],b=0,ch=0,l=[],u=[],rt=[],ut=[],ft=[],lh=[],er=null,ki=null,ls=0,di=t('<select class="vis-statusbar-combo" style="min-width:50px"><\/select>'),as=null,vs=null,ys=null,ps=null,v=1,rf=20,yf=0,y=!0,gr=!1,ah=!1,or=null,sr=null,hr=null,gi=null,nu=null,ws=[],bs=[],ko=[],uf=[],cr=null,ff=null,lr=null,tu=null,ar=null,h=0,ks="",p=null,go=!1,ef=[],ti=!1,pf=null,wf=null,bf=null,kf=null,df=null,gf=null,ne=null,te=null,ie=null,re=null,pt=[],ii=[],ue=[],vh=[],ds=0;this.initalize=function(){bl();nc();gl();na();ba()};this.initalLoad=function(){y=!1;ds=VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar("SELECT COUNT(*) FROM AD_MODULEINFO WHERE PREFIX='BGT01_' "));window.setTimeout(function(){p=t("<img>");t(".VA011_image-wrap").append(p);cs=t("#VA011_ZoomProduct");cs.on("click touchstart",function(n){n.preventDefault();n.stopPropagation();ds>0?ge(h,"BGT01_StyleMaster"):ge(h,"Product")});cr=t("#VA011_calculateReplenishLI"+n.windowNo);ff=t("#VA011_generateReplenishLI"+n.windowNo);lr=t("#VA011_addtoCartLI"+n.windowNo);tu=t("#VA011_ProdDetZoomName"+n.windowNo);ar=t("#VA011_DisplayReplenishRuleLI_"+n.windowNo);pf=t("#VA011_btnDetails_"+n.windowNo);wf=t("#VA011_btnSubsti_"+n.windowNo);bf=t("#VA011_btnRelated_"+n.windowNo);kf=t("#VA011_btnSuppliers_"+n.windowNo);df=t("#VA011_btnKits_"+n.windowNo);gf=t("#VA011_RightSection"+n.windowNo);ne=t("#VA011_grdSubstitute_"+n.windowNo);te=t("#VA011_grdRelated_"+n.windowNo);ie=t("#VA011_grdSuppliersRight_"+n.windowNo);re=t("#VA011_grdKits_"+n.windowNo);cr&&cr.css("display","block");lr&&lr.css("display","block");ar&&ar.css("display","block");gs()},200)};iu=this;ee=function(){nt.empty();var n="SELECT VAICNT_InventoryCount_ID,VAICNT_ScanName FROM VAICNT_InventoryCount WHERE IsActive = 'Y' AND VAICNT_TransactionType = 'OT' AND AD_Client_ID = "+VIS.context.getContext("#AD_Client_ID")+" ORDER BY VAICNT_ScanName";VIS.DB.executeReader(n,null,ic)};be=[];de=[];ge=function(n,t){var f="select ad_window_id from ad_window where name = '"+t+"'",u=0,r,i;try{r=VIS.DB.executeDataReader(f);r.read()&&(u=r.getInt(0));r.dispose();u>0&&(i=new VIS.Query,t=="BGT01_StyleMaster"?i.addRestriction("M_Product_ID",VIS.Query.prototype.EQUAL,n):t=="Product"?i.addRestriction("M_Product_ID",VIS.Query.prototype.EQUAL,n):t=="Attribute Set"?i.addRestriction("M_AttributeSet_ID",VIS.Query.prototype.EQUAL,n):t=="Product Category"?i.addRestriction("M_Product_Category_ID",VIS.Query.prototype.EQUAL,n):t=="Tax Category"?i.addRestriction("C_TaxCategory_ID",VIS.Query.prototype.EQUAL,n):t=="Unit of Measure"?i.addRestriction("C_Uom_ID",VIS.Query.prototype.EQUAL,n):t=="VAICNT_InventoryCount"&&i.addRestriction("VAICNT_InventoryCount_ID",VIS.Query.prototype.EQUAL,n),i.setRecordCount(1),VIS.viewManager.startWindow(u,i),bt!=null&&bt.close())}catch(e){console.log(e)}};this.getRoot=function(){return vr};this.disposeComponent=function(){iu=null;vr&&vr.remove();vr=null;this.getRoot=null;this.disposeComponent=null}};n.InventoryForm.prototype.init=function(n,t){this.frame=t;this.windowNo=n;this.initalize();this.frame.getContentGrid().append(this.getRoot());this.initalLoad();w2ui["VA011_gridVariant_"+n].refresh()};n.InventoryForm.prototype.sizeChanged=function(){};n.InventoryForm.prototype.dispose=function(){this.disposeComponent();this.frame&&this.frame.dispose();this.frame=null}}(VA011,jQuery)